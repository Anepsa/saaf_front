(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{EHav:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var o=n("q1tI"),a=n.n(o),i=n("eoB5"),r=n("LvDl"),s=n.n(r),l=n("htxa"),c=n("Bdpz");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _toConsumableArray(e){return function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function UserDropdownOption(e){return a.a.createElement("div",{className:"workspace-invite__option"},a.a.createElement(i.UserIcon,{url:e.profilePicUrl,userId:e.id}),e.name||e.username||e.email)}function UserDropdown(e){return a.a.createElement("div",{className:"workspace-invite__input",ref:e.setInputRef},a.a.createElement(i.SelectDropdown,{block:!0,searchable:!0,autosize:!1,className:"workspace-invite__select",filterOption:c.x.userFilter,label:"Enter name or email",labelKey:"name",noResultsText:e.allowTeamInvite?"Press Enter to invite this user to your team":"No users found",optionRenderer:UserDropdownOption,options:e.options,size:"md",value:e.value,valueKey:"id",onBlurResetsInput:!1,onChange:e.onAdd,onInputKeyDown:e.allowTeamInvite&&function handleInputKeyDown(t){var n=t.target.value;"Enter"===t.key&&c.t.isEmail(n)&&!s.a.find(e.options,{email:"".concat(n)})&&(e.onAdd({email:t.target.value,teamInvite:!0}),t.preventDefault())}}),a.a.createElement(i.Icon,{name:"add",size:"sm"}))}var u=function(e){function WorkspaceInviteForm(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,WorkspaceInviteForm),(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(WorkspaceInviteForm).call(this,e))).state=t.getState(e),t.handleAdd=t.handleAdd.bind(_assertThisInitialized(t)),t.handleRemove=t.handleRemove.bind(_assertThisInitialized(t)),t.handleUpdate=t.handleUpdate.bind(_assertThisInitialized(t)),t.setInputRef=t.setInputRef.bind(_assertThisInitialized(t)),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(WorkspaceInviteForm,o["Component"]),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(WorkspaceInviteForm,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){var t=s.a.get(this.props,"users.length")!==s.a.get(e,"users.length");(!s.a.isEqual(this.props.invitees,e.invitees)||t)&&this.setState(this.getState(e))}},{key:"getState",value:function getState(e){var t=e.invitees||[],n=e.users||[],o=t.map(function(e){return"".concat(e.id)});return{users:n.filter(function(e){return o.indexOf("".concat(e.id))<0}),invitees:t,error:null,value:null}}},{key:"handleAdd",value:function handleAdd(e){var t=this,n={selectedOption:this.props.hideOptions?null:this.props.defaultOption||s.a.get(this.props,"permissions.0.value")},o=this.state.invitees.filter(function(e){return e.teamInvite}),a=this.props.maxTeamInvites;return this.props.canSendInvites&&e.teamInvite&&"number"==typeof a&&o.length+1>a?this.setState({error:"You have used up all your user slots. Add more slots to invite users to your team."}):s.a.find(this.state.invitees,{email:e.email})?this.setState({error:"".concat(e.email," user has already been invited to this workspace.")}):this.setState(function(t){return{users:t.users.filter(function(t){return t.id!==e.id}),invitees:[].concat(_toConsumableArray(t.invitees),[s.a.assign(e,n)]),error:null,value:""}},function(){t.inputRef.querySelector(".Select-input input").blur(),t.props.onChange(t.state.invitees)})}},{key:"handleRemove",value:function handleRemove(e){var t=this,n=e;this.props.teamEntity&&n--,this.props.isTeamCreate&&n--,this.setState(function(e){var t=e.invitees[n];return{users:[].concat(_toConsumableArray(e.users),[s.a.omit(t,"selectedOption")]),invitees:e.invitees.filter(function(e,t){return t!==n})}},function(){t.props.onChange(t.state.invitees)})}},{key:"handleUpdate",value:function handleUpdate(e,t){var n=this,o=e,a=this.props.teamEntity;a&&0===o?this.props.onTeamRoleChange(t):(a&&o--,this.props.isTeamCreate&&o--,this.setState(function(e){return{invitees:e.invitees.map(function(e,n){return n===o?function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{selectedOption:t}):e})}},function(){n.props.onChange(n.state.invitees)}))}},{key:"setInputRef",value:function setInputRef(e){this.inputRef=e}},{key:"render",value:function render(){var e={id:s.a.get(this.props,"teamEntity.teamId"),name:"Everyone in team",profilePicUrl:s.a.get(this.props,"teamEntity.teamLogoUrl"),selectedOption:s.a.get(this.props,"teamEntity.teamRole"),disableOptions:this.props.hideOptions,hideRemove:!0},t={id:s.a.get(this.props,"userId"),name:"You",profilePicUrl:s.a.get(this.props,"userData.profile_pic_url"),selectedOption:s.a.get(this.props,"defaultCreatorRole"),disableOptions:!0,hideRemove:!0},n=[];return n=this.props.isTeamCreate?this.props.teamEntity?[e,t].concat(_toConsumableArray(this.state.invitees)):[t].concat(_toConsumableArray(this.state.invitees)):this.props.teamEntity?[e].concat(_toConsumableArray(this.state.invitees)):this.state.invitees,a.a.createElement("div",null,a.a.createElement(l.cb,{className:"workspace-invite",inputComponent:a.a.createElement(UserDropdown,{allowTeamInvite:this.props.allowTeamInvite,options:this.state.users,setInputRef:this.setInputRef,value:this.state.value,onAdd:this.handleAdd}),list:n,options:this.props.permissions,onRemove:this.handleRemove,onUpdate:this.handleUpdate}),this.state.error&&a.a.createElement(i.Alert,{className:"push--top",pmStyle:"error"},this.state.error))}}]),WorkspaceInviteForm}()},OQZp:function(e,t,n){"use strict";n.d(t,"c",function(){return isWorkspaceMember}),n.d(t,"a",function(){return findUserDiff}),n.d(t,"b",function(){return getUsers});var o=n("LvDl"),a=n.n(o);function isWorkspaceMember(e,t){var n=a.a.get(e,"members.users")||{},o=a.a.get(e,"type"),i=a.a.get(e,"createdBy.id")||a.a.get(e,"createdBy");return!!t&&("personal"===o?"".concat(i)==="".concat(t):Boolean(n[t]))}function findUserDiff(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[]).map(function(e){return e.id}),n=e.map(function(e){return e.id}),o={$diff:!0,$add:{},$remove:{}};return t.sort().toString()===n.sort().toString()?null:(n.forEach(function(e){t.indexOf(e)<0&&(o.$add[e]={id:e})}),t.forEach(function(e){n.indexOf(e)<0&&(o.$remove[e]={id:e})}),o)}function getUsers(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return Object.values(e).reduce(function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return(n.roles||[]).indexOf("user")>-1&&"".concat(n.id)!=="".concat(t)&&e.push({name:n.name,id:n.id,email:n.email,username:n.username,profilePicUrl:n.profile_pic_url}),e},[])}},YAsY:function(e,t,n){"use strict";var o=n("q1tI"),a=n.n(o),i=n("eoB5"),r=n("/MKj"),s=n("LvDl"),l=n.n(s),c=n("EHav"),u=n("mEBc"),p=n("OQZp"),m=n("o9Si"),d=n("Bdpz");function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var h="workspace";function FreeInviteView(e){return a.a.createElement("div",null,a.a.createElement("p",null,"You can invite other users and start collaborating with them on this collection."),a.a.createElement("label",{htmlFor:"ws-individual-perm"},"Invite these users"),a.a.createElement(c.a,{allowTeamInvite:!0,invitees:e.invitees,onChange:e.onInviteChange}),a.a.createElement("p",{className:"workspace-add-entity__info"},"These people will receive an invitation to join your team."))}function WorkpsaceView(e){var t=e.entity||{},n=e.workspace||{};return a.a.createElement("div",null,a.a.createElement("label",{htmlFor:"ws-list"},"Workspace"),a.a.createElement(u.a,{options:e.workspaces,value:n&&n.id,onChange:e.onWorkspaceChange}),"personal"===n.type&&a.a.createElement("p",{className:"workspace-add-entity__info"},"This collection will be shared in the selected personal workspace."),"team"===n.type&&a.a.createElement("p",{className:"workspace-add-entity__info"},"Sharing this ",t.type," in a team workspace will make it visible to everyone in the workspace."),e.isFree&&a.a.createElement("div",null,a.a.createElement("hr",{className:"push--bottom push-one-half--top"}),a.a.createElement("label",null,"Share with your team?"),a.a.createElement("p",null,"Share this collection with your team by inviting users to collaborate in a team workspace."),a.a.createElement("span",{className:"pm-link",onClick:e.onInvite},"Invite users")))}var f=function(e){function AddEntityToWorkspace(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,AddEntityToWorkspace),(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(AddEntityToWorkspace).call(this,e))).state={workspace:null,invitees:[],view:h},t.handleConfirm=t.handleConfirm.bind(_assertThisInitialized(t)),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(AddEntityToWorkspace,o["Component"]),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(AddEntityToWorkspace,[{key:"componentDidMount",value:function componentDidMount(){this.props.getWorkspaces()}},{key:"handleConfirm",value:function handleConfirm(){var e=this.props.entity||{};this.state.invitees.length?this.props.shareCollectionWithUsers({dashboard:this.props.dashboard,god:this.props.god,collectionId:e.id,data:{invitations:this.state.invitees.map(function(e){return{email:e.email,roles:["user","admin","billing"]}}),dependencies:{collections:{$diff:!0,$add:[e.id]}}}}):this.props.addEntitiesToWorkspace(function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({redirect:this.props.redirect,workspace:this.state.workspace},"".concat(e.type,"s"),[e.id]))}},{key:"render",value:function render(){var e=this,t=this.props.entity||{},n=this.state.workspace,o=l.a.includes(this.props.updating,n&&n.id);return a.a.createElement(i.Card,{className:"workspace-add-entity"},a.a.createElement("h3",{className:"pm-h3"},"Share this ",t.type),a.a.createElement("p",{className:"workspace-add-entity__name"},t.name),a.a.createElement(i.Button,{className:"workspace-add-entity__close",icon:"close-big",pmStyle:"alternate",size:"sm",onClick:this.props.hideModal}),a.a.createElement("hr",{className:"push--ends"}),this.state.view===h&&a.a.createElement(WorkpsaceView,{entity:t,isFree:this.props.isFree,workspace:n,workspaces:this.props.workspaces,onInvite:function onInvite(){e.setState({view:"invite"})},onWorkspaceChange:function onWorkspaceChange(t){e.setState({workspace:t})}}),"invite"===this.state.view&&a.a.createElement(FreeInviteView,{invitees:this.state.invitees,onInviteChange:function onInviteChange(t){e.setState({invitees:t})}}),a.a.createElement(i.FormActions,{cancelButtonClass:"workspace-add-entity__cancel",cancelText:"Cancel",className:"workspace-add-entity__actions",confirmDisabled:!n&&!this.state.invitees.length||this.props.sharing,confirming:o||this.props.sharing,confirmText:"Share",size:"md",onCancel:this.props.hideModal,onConfirm:this.handleConfirm}))}}]),AddEntityToWorkspace}();t.a=Object(r.b)(function mapStateToProps(e,t){var n=t.workspace||{},o=l.a.get(e,"shared.workspaces")||{},a=l.a.get(e,"shared.userData.identity.user"),i=l.a.get(e,"shared.userData.user.roles",[]).indexOf("user")<0;return{updating:o.updating,sharing:l.a.get(e,"shared.collections.sharingWithUsers"),isFree:d.o.isFree(l.a.get(e,"shared.userData.account.planName")),dashboard:l.a.get(e,"shared.userData.config.postmanServices.dashboard")||{},god:l.a.get(e,"shared.userData.config.postmanServices.god")||{},workspaces:Object.values(o.byId).filter(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=!0;return i&&(t=t&&"personal"===e.type),t=t&&e.id!==n.id&&l.a.get(e,["members","users",a])}),users:Object(p.b)(l.a.get(e,"shared.team.users.byId"),a)}},l.a.pick(m.b,["hideModal","addEntitiesToWorkspace","getWorkspaces","shareCollectionWithUsers"]))(f)},mEBc:function(e,t,n){"use strict";n.d(t,"a",function(){return WorkspaceSelect});var o=n("q1tI"),a=n.n(o),i=n("eoB5"),r=n("TSYQ"),s=n.n(r);function WorkspaceOption(e){return a.a.createElement("div",{className:"workspace-select__option"},a.a.createElement("span",null,e.name),"team"===e.type&&a.a.createElement(i.Icon,{name:"team",size:"sm"}))}function WorkspaceSelect(e){return a.a.createElement(i.SelectDropdown,{block:!0,autoBlur:!1,className:s()("workspace-select",e.className),id:e.id,label:"Select a workspace",labelKey:"name",optionRenderer:WorkspaceOption,options:e.options,size:"md",value:e.value,valueKey:"id",onChange:e.onChange})}},rFPs:function(e,t,n){"use strict";n.r(t);var o=n("q1tI"),a=n.n(o),i=n("dtw8"),r=n("/MKj"),s=n("LvDl"),l=n.n(s),c=n("eoB5"),u=n("TSYQ"),p=n.n(u),m=n("htxa"),d=n("Bdpz"),h=n("WTCG"),f=n("+QRC"),g=n.n(f),y=n("YAsY"),b=n("ZyTw");function Viewers(e){var t=e.viewers,n="",o=[];return t.length>b.MAX_DOCUMENTATION_VIEWER_COUNT&&(o=t.slice(b.MAX_DOCUMENTATION_VIEWER_COUNT,t.length),t=t.slice(0,b.MAX_DOCUMENTATION_VIEWER_COUNT),n=o.map(function(e){return e.name}).join(", ")),a.a.createElement("div",{className:"docs-viewer"},t.map(function(e){return a.a.createElement(c.Tooltip,{content:"".concat(e.name," viewing"),key:e},function(t){return a.a.createElement("div",{className:"docs-viewer__user-icon-container",ref:t.triggerRef,onMouseOut:t.onMouseOut,onMouseOver:t.onMouseOver},a.a.createElement(i.c,{className:"docs-viewer__user-icons",key:e.id,to:"/users/".concat(e.id)},a.a.createElement(c.UserIcon,{size:"sm",url:e.profilePicUrl,userId:e.id})))})}),o.length>0&&a.a.createElement(c.Tooltip,{content:"".concat(n," viewing")},function(e){return a.a.createElement("div",{className:"docs-viewer__others",ref:e.triggerRef,onMouseOut:e.onMouseOut,onMouseOver:e.onMouseOver},"+",o.length)}))}var v={EDIT:"edit",UNPUBLISH:"unpublish",COPY:"copy",LINK:"link",ADD:"add",PUBLISH:"publish"};function handleAction(e,t){var n={type:"collection",name:t.name,id:t.id};e.value===v.EDIT||e.value===v.PUBLISH?(e.value===v.PUBLISH&&(d.a.recordEvent("documentationPublish"),d.a.recordEvent("documentationPublishFromPrivateView",{entityId:n.id})),d.s.goToRoute("/collections/".concat(t.id,"/publish?version=").concat(t.selectedVersionId))):e.value===v.COPY?g()(e.link):e.value===v.LINK?(d.a.recordEvent("documentationPublicViewFromPrivateView",{entityId:n.id}),d.s.goToNewWindow(e.link)):e.value===v.ADD&&window.pm.actions.showModal({children:a.a.createElement(y.a,{entity:n})})}function Topbar(e){var t=e.name,n=e.owner,o=void 0===n?{}:n,i=e.userId,r=e.published,s=e.customDomainId,u=e.publishedId,f=e.collectionId,g=e.unpublishing,y=e.documentationConfig,b=e.viewers,C=d.n.canPublishCollection(e.collectionPermissions),_=d.n.canShareCollection(e.collectionPermissions),w=l.a.find(e.customDomains,{id:s}),E=((e.versions||[]).find(function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).value===e.selectedVersionId})||{}).label,O={id:f,owner:o.id,publishedId:u,version:E},P=Object(h.f)(O,w,y),S=[{label:a.a.createElement("div",null,a.a.createElement("span",{className:"published-doc__label"},"This collection is published at:"),a.a.createElement("span",{className:"pm-link published-doc__url"},P)),value:v.LINK,link:P},{label:"Copy Public Link",value:v.COPY,link:P},{label:"Edit Published Documentation",value:v.EDIT}],k=g?a.a.createElement(c.Button,{className:"docs-actions__publish",size:"sm"},a.a.createElement(c.Loader,null)):a.a.createElement(c.Button,{className:"docs-actions__publish"},a.a.createElement(c.Icon,{name:"publish",size:"sm"}),a.a.createElement("span",{className:"publish-label"},"Published"),a.a.createElement(c.Icon,{name:"down",size:"sm"})),I=[{label:"Share",value:v.ADD}];return C&&(r?I=I.concat(S):I.push({label:"Publish",value:v.PUBLISH})),a.a.createElement("div",{className:"docs-topbar"},a.a.createElement("div",{className:"docs-collection-info"},a.a.createElement("h3",{className:"pm-h3 docs-title",title:t},t),a.a.createElement(m.k,{forkedFrom:e.forkedFrom}),a.a.createElement(m.eb,{className:"docs-author",currentUserId:i,id:o.id,user:o}),Array.isArray(b)&&b.length>0&&a.a.createElement("div",{className:"doc-viewers"},a.a.createElement(Viewers,{viewers:b}))),a.a.createElement("div",{className:"docs-more-options"},a.a.createElement(c.MoreOptionsDropdown,{options:I,onChange:function onChange(t){handleAction(t,e)}})),a.a.createElement("div",{className:"docs-actions"},a.a.createElement(c.SelectDropdown,{block:!0,clearable:!0,className:"docs-versions",label:"Select a version",options:e.versions,searchable:!1,value:e.selectedVersionId,onChange:function onChange(t){e.onVersionChange(t&&t.value)}}),a.a.createElement("div",{className:"visible-desktop-inline-block"},r?a.a.createElement(c.Dropdown,{className:p()("pm-dropdown--align-right",{disabled:!C}),label:k,options:S,onChange:function onChange(t){handleAction(t,e)}}):a.a.createElement(c.Button,{className:"push-half--right",disabled:!C,icon:"publish",pmStyle:"secondary",size:"sm",onClick:function onClick(){handleAction({value:v.PUBLISH},e)}},"Publish"),a.a.createElement(c.Button,{className:"docs-actions__subscribe",disabled:!_,icon:"share",pmStyle:"secondary",onClick:function onClick(){handleAction({value:v.ADD},e)}},"Share"))))}function _typeof(e){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(n),!0).forEach(function(t){_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function _defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var C=function(e){function Collection(e){var t;return function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Collection),(t=function _possibleConstructorReturn(e,t){return!t||"object"!==_typeof(t)&&"function"!=typeof t?_assertThisInitialized(e):t}(this,_getPrototypeOf(Collection).call(this,e))).getCollectionPermission=t.getCollectionPermission.bind(_assertThisInitialized(t)),t.handleVersionChange=t.handleVersionChange.bind(_assertThisInitialized(t)),t.handlePresenceReporting=t.handlePresenceReporting.bind(_assertThisInitialized(t)),t}return function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}(Collection,o["Component"]),function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(Collection,[{key:"UNSAFE_componentWillMount",value:function UNSAFE_componentWillMount(){var e=this.props.location.query;window.pm.actions.getCollectionMeta({collectionId:this.props.params.id,workspaceId:e.workspace||this.props.workspaces.active}),window.pm.actions.getPublicCollectionInfo({collectionUid:this.props.params.id,versionId:this.props.location.query.version}),this.props.isFree||window.pm.actions.getDomains()}},{key:"componentDidMount",value:function componentDidMount(){this.getCollectionPermission(),window.pm.actions.getCollectionVersions({collectionId:this.props.params.id})}},{key:"componentDidUpdate",value:function componentDidUpdate(){var e=this.props,t=e.usage,n=e.limit,o=e.plan,a=e.enterprise,i=this.props.location.query.version,r=(this.props.versions||[]).find(function(e){return i===e.value}),s=l.a.get(this.props.versions,"0.value");if(!this.props.isFree&&this.props.loaded&&this.handlePresenceReporting(),Object(d.j)(t,n)&&!this.alerted){var c="over"===Object(d.j)(t,n);window.pm.actions.showBanner({dismissable:!1,name:"documenter-limit",body:Object(d.k)("docs-private",o,c,a),type:"warning"}),this.alerted=!0}i&&r||!s||window.pm.actions.replace(_objectSpread({},this.props.location,{query:_objectSpread({},this.props.location.query,{version:s})}))}},{key:"componentWillUnmount",value:function componentWillUnmount(){window.pm.actions.hideBanner({name:"documenter-limit"}),this.apiInterval&&clearInterval(this.apiInterval)}},{key:"getCollectionPermission",value:function getCollectionPermission(){var e=[];this.props.teamId&&e.push({entityType:"team",entityId:this.props.teamId}),this.props.userId&&e.push({entityType:"user",entityId:this.props.userId}),window.pm.actions.getPermissions({data:{objects:[{objectType:"collection",objectId:this.props.params.id}],entities:e}})}},{key:"handleVersionChange",value:function handleVersionChange(e){var t=this.props.location,n=d.w.populateParams(_objectSpread({},t.query,{version:e}));d.a.recordEvent("documentationChangeVersion",{entityId:this.props.params.id}),d.s.goToRoute("".concat(t.pathname).concat(n))}},{key:"handlePresenceReporting",value:function handlePresenceReporting(){var e=this;this.props.errorViewers?this.apiInterval&&clearInterval(this.apiInterval):!1===this.props.loadingViewers&&!1===this.props.loadedViewers?window.pm.actions.getViewers({workspaceId:this.props.activeWorkspace,collectionId:this.props.params.id,browserId:d.c.getDeviceId(),userId:this.props.userId}):!this.apiInterval&&this.props.loadedViewers&&this.props.reportTime&&(this.apiInterval=setInterval(function(){window.pm.actions.getViewers({workspaceId:e.props.activeWorkspace,collectionId:e.props.params.id,browserId:d.c.getDeviceId(),userId:e.props.userId})},this.props.reportTime))}},{key:"render",value:function render(){var e=this,t=this.props,n=t.params,o=t.location,i=t.children,r=t.name,s=t.owner,u=t.userId,p=t.subscribers,m=t.permissions,f=t.published,g=t.publishedId,y=t.customDomains,b=t.customDomainId,v=t.unpublishing,C=t.documentationConfig,_=t.apiNetworkId,w=t.templateId,E=t.publishType,O=t.publishedToNetwork,P=t.viewers,S=this.props.location.query.version||l.a.get(this.props,"versions.0.value");return a.a.createElement("div",{className:"collection"},this.props.loaded?a.a.createElement(Topbar,{apiNetworkId:_,collectionId:Object(h.b)(n.id),collectionPermissions:this.props.collectionPermissions,customDomainId:b,customDomains:y,documentationConfig:C,forkedFrom:this.props.forkedFrom,id:n.id,name:r,owner:s,permissions:m,published:f,publishedId:g,publishedToNetwork:O,publishType:E,selectedVersionId:S,subscribers:p,templateId:w,unpublishing:v,userId:u,versions:this.props.versions,viewers:P,onVersionChange:this.handleVersionChange}):null,this.props.loaded?a.a.createElement(c.ControlledTabs,{activeRefKey:o.pathname,className:"docs-tabs",pmStyle:"primary",onChangeTab:function onChangeTab(t){var n=e.props.location,o=d.w.populateParams(_objectSpread({},n.query,{version:S}));d.s.goToRoute("".concat(t).concat(o))}},a.a.createElement(c.TabList,null,a.a.createElement(c.Tab,{refKey:"/collections/".concat(n.id)},"Documentation"),a.a.createElement(c.Tab,{refKey:"/collections/".concat(n.id,"/monitors")},"Monitors"),a.a.createElement(c.Tab,{refKey:"/collections/".concat(n.id,"/mocks")},"Mocks"),a.a.createElement(c.Tab,{refKey:"/collections/".concat(n.id,"/activity")},"Changelog"))):null,i)}}]),Collection}();var _=Object(r.b)(function mapStateToProps(e,t){var n=Object(h.b)(t.params.id),o=l.a.get(e,"collection.meta")||{},a=l.a.get(e,"collection.versions")||{},i=l.a.get(e,["shared","workspaces","active"]),r=l.a.get(e,["shared","team","users","byId"]),s=l.a.get(e,"collection.presence.viewers")||[];return s.length>0&&(s=s.filter(function(t){return t.id!==l.a.get(e,"shared.userData.identity.user")})),s.map(function(e){e.profilePicUrl=null,e.profilePicUrl=l.a.get(r,[e.id,"profile_pic_url"])}),_objectSpread({},e.collection.meta,{loading:e.collection.meta.loading||a.loading,versions:(a.data||[]).map(function(e){return{value:l.a.get(e,"id"),label:l.a.get(e,"apiVersion.name")}}),documentationConfig:l.a.get(e,"shared.userData.config.postmanServices.doc"),userId:l.a.get(e,"shared.userData.identity.user"),teamId:l.a.get(e,"shared.userData.identity.team"),usage:l.a.get(e,"shared.collections.byId.".concat(n,".limits.usage")),limit:l.a.get(e,"shared.collections.byId.".concat(n,".limits.limit")),plan:l.a.get(e,"shared.userData.account.planName"),viewers:s,loadingViewers:l.a.get(e,"collection.presence.loadingViewers"),loadedViewers:l.a.get(e,"collection.presence.loadedViewers"),errorViewers:l.a.get(e,"collection.presence.errorViewers"),activeWorkspace:i,collectionPermissions:l.a.get(e,["shared","permissions","collection",t.params.id]),reportTime:l.a.get(e,"collection.presence.reportTime"),enterprise:l.a.get(e,"shared.userData.account.enterprise"),workspaces:l.a.get(e,"shared.workspaces"),customDomains:[].concat(Object.values(l.a.get(e,"settings.domains.byId")||{})),isFree:d.o.isFree(l.a.get(e,"shared.userData.account.planName")),unpublishing:o.unpublishing})})(C),w=n("i8i4");function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function RequestIcon(e){var t=e.method,n=Object(h.g)(t.toLowerCase());return a.a.createElement("span",{className:p()("pm-method-color-".concat(n),e.className),title:t},n)}function FolderIcon(e){var t=e.onClick,n=e.open;return a.a.createElement("a",{className:"docs-nav__icon--folder",onClick:t},a.a.createElement(c.Icon,{className:p()({"rotate-90":!n}),name:"down",size:"sm"}))}function ItemIcon(e){var t=e.type;return a.a.createElement("div",{className:p()("docs-nav__icon",function ItemIcon_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"docs-nav__icon--".concat(t),Boolean(t)))},"folder"===t&&a.a.createElement(FolderIcon,e),"request"===t&&a.a.createElement(RequestIcon,_extends({},e,{className:"docs-nav__method"})))}function ItemName(e){var t=e.type,n=e.name,o=e.onClick,i=e.id,r=e.onOverlayItemClick;return a.a.createElement("div",{className:"docs-nav__name docs-nav__name--".concat(t)},a.a.createElement("a",{className:"docs-nav__link no-select",href:"#".concat(i),title:n,onClick:function onClick(){!function handleItemNameClick(e,t){[e,t].forEach(function(e){"function"==typeof e&&e()})}(o,r)}},n))}function ItemHead(e){return a.a.createElement("div",{className:"docs-nav__head"},a.a.createElement(ItemIcon,e),a.a.createElement(ItemName,e))}function ItemContent(e){var t=e.children,n=e.open;return t?a.a.createElement("ul",{className:p()("docs-nav__content",{hidden:!n})},t):null}function Item_typeof(e){return(Item_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Item_extends(){return(Item_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Item_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Item_getPrototypeOf(e){return(Item_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Item_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Item_setPrototypeOf(e,t){return(Item_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var E=function(e){function Item(e){var t;return function Item_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Item),(t=function Item_possibleConstructorReturn(e,t){return!t||"object"!==Item_typeof(t)&&"function"!=typeof t?Item_assertThisInitialized(e):t}(this,Item_getPrototypeOf(Item).call(this,e))).state={open:!1},t.handleClick=t.handleClick.bind(Item_assertThisInitialized(t)),t}return function Item_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Item_setPrototypeOf(e,t)}(Item,o["Component"]),function Item_createClass(e,t,n){return t&&Item_defineProperties(e.prototype,t),n&&Item_defineProperties(e,n),e}(Item,[{key:"handleClick",value:function handleClick(){this.setState(function(e){return{open:!e.open}})}},{key:"render",value:function render(){return a.a.createElement("li",{className:p()("docs-nav__item",function Item_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},"docs-nav__item--".concat(this.props.type),Boolean(this.props.type)))},a.a.createElement(ItemHead,Item_extends({open:this.state.open},this.props,{onClick:this.handleClick})),a.a.createElement(ItemContent,Item_extends({open:this.state.open},this.props)))}}]),Item}();function TocItem(e){var t=e.heading,n=e.id,o=e.onOverlayItemClick;return a.a.createElement(E,{id:n,key:n,name:t,type:"tocItem",onOverlayItemClick:o})}function TableOfContents(e){var t=e.collectionInfo,n=void 0===t?{}:t,o=e.onOverlayItemClick,i=l.a.get(n,"toc");return a.a.createElement("li",null,a.a.createElement("ul",null,a.a.createElement(TocItem,{heading:"Introduction",id:"introduction",key:"introduction",onOverlayItemClick:o}),(i||[]).map(function(e){return a.a.createElement(TocItem,{heading:l.a.get(e,"content")||"",id:l.a.get(e,"slug")||"",key:l.a.get(e,"slug")||"",onOverlayItemClick:o})})))}function NoRequestsSidebar(){return a.a.createElement("p",{className:"documenter-no-requests__sidebar"},"This is where requests saved in your collections would appear.")}function NoRequestsBody(){return a.a.createElement("div",{className:"pm-col-md-7 documenter-no-requests__body"},a.a.createElement("p",null,"Add description to your API requests to generate beautiful documentation for them. ",a.a.createElement("br",null)),a.a.createElement("div",null,a.a.createElement("a",{className:"pm-link",href:"https://www.getpostman.com/docs/postman/collections/using_markdown_for_descriptions",rel:"noopener noreferrer",target:"_blank"},"Learn more about documenting your APIs")))}function Sidebar_typeof(e){return(Sidebar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Sidebar_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Sidebar_getPrototypeOf(e){return(Sidebar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Sidebar_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Sidebar_setPrototypeOf(e,t){return(Sidebar_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function SidebarContent(e){var t=e.collectionInfo,n=e.items,o=e.onOverlayItemClick;return!(n&&n.length>0)?a.a.createElement(NoRequestsSidebar,null):a.a.createElement("ul",{className:"docs-nav__items"},a.a.createElement(TableOfContents,{collectionInfo:t,onOverlayItemClick:o}),n.map(function(e){return function getNavTree(e,t){return e?Object(h.c)(e)?a.a.createElement(E,{id:e._postman_id,key:e._postman_id,name:e.name,type:"folder",onOverlayItemClick:t},e.item.map(function(e){return getNavTree(e,t)})):a.a.createElement(E,{id:e._postman_id,key:e._postman_id,method:e.request.method||"",name:e.name,type:"request",onOverlayItemClick:t}):null}(e,o)}))}var O=function(e){function Sidebar(e){var t;return function Sidebar_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Sidebar),(t=function Sidebar_possibleConstructorReturn(e,t){return!t||"object"!==Sidebar_typeof(t)&&"function"!=typeof t?Sidebar_assertThisInitialized(e):t}(this,Sidebar_getPrototypeOf(Sidebar).call(this,e))).scrollHandler=t.scrollHandler.bind(Sidebar_assertThisInitialized(t)),t.resizeHandler=t.resizeHandler.bind(Sidebar_assertThisInitialized(t)),t}return function Sidebar_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Sidebar_setPrototypeOf(e,t)}(Sidebar,o["Component"]),function Sidebar_createClass(e,t,n){return t&&Sidebar_defineProperties(e.prototype,t),n&&Sidebar_defineProperties(e,n),e}(Sidebar,[{key:"componentDidMount",value:function componentDidMount(){Object(h.d)()||(this.DOMNode=Object(w.findDOMNode)(this),this.offset=this.DOMNode.getBoundingClientRect().top,this.clientHeight=Object(h.a)(),window.addEventListener("scroll",this.scrollHandler,!1),window.addEventListener("resize",this.resizeHandler,!1))}},{key:"componentWillUnmount",value:function componentWillUnmount(){Object(h.d)()||(window.removeEventListener("scroll",this.scrollHandler,!1),window.removeEventListener("resize",this.resizeHandler,!1))}},{key:"resizeHandler",value:function resizeHandler(){this.clientHeight=Object(h.a)()}},{key:"scrollHandler",value:function scrollHandler(){var e=this.offset-window.scrollY;e>0?(this.DOMNode.style.height="".concat(this.clientHeight-e,"px"),this.DOMNode.style.top="".concat(e,"px")):(this.DOMNode.style.top=0,this.DOMNode.style.height="".concat(this.clientHeight,"px"))}},{key:"render",value:function render(){var e=this.props.inOverlay;return a.a.createElement("div",{className:e?"overlay-sidenav__doc-nav-tree":"docs-nav"},a.a.createElement(SidebarContent,this.props))}}]),Sidebar}(),P=n("l4cn");function DescriptionTitle_typeof(e){return(DescriptionTitle_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function RequestUrl(e){var t=l.a.get(e,"item.request.url")||"";return!t||"object"!==DescriptionTitle_typeof(t)&&"string"!=typeof t?null:("object"===DescriptionTitle_typeof(t)&&(t=t.raw||""),a.a.createElement("div",{className:"docs-desc-title__url"},t))}function RequestTitle(e){var t=l.a.get(e,"item.request.method","")||"",n=l.a.get(e,"item.name"),i=l.a.get(e,"item.request.auth"),r=i&&"noauth"!==l.a.get(i,"type"),s=l.a.get(e,"item._postman_id"),c="request/".concat(s),u=e.focusedAnchor||"";return a.a.createElement(o.Fragment,null,a.a.createElement("div",{className:"clearfix push--bottom"},a.a.createElement("h2",{className:"pm-h2 docs-desc-title docs-desc-title--request"},a.a.createElement("span",{className:"pm-method-color-".concat(t.toLowerCase())},t," "),n,r&&a.a.createElement(m.C,{align:"right",className:"push-half--left docs-desc-title--request-lock",content:"This request requires authentication",name:"lock",size:"sm"})),a.a.createElement(P.b,{anchor:c,comments:e.comments,open:u.indexOf(c)>-1,teamUsers:e.teamUsers,user:e.user,onCommentCreate:function onCommentCreate(){for(var t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];e.onCommentCreate.apply(e,n.concat([c]))},onCommentDelete:e.onCommentDelete,onCommentUpdate:e.onCommentUpdate})),a.a.createElement(RequestUrl,e))}function FolderTitle(e){var t=l.a.get(e,"item.name");return a.a.createElement("h2",{className:"pm-h2 docs-desc-title docs-desc-title--folder"},t)}function CollectionTitle(e){var t=l.a.get(e,"item.name");return a.a.createElement("div",{className:"clearfix"},a.a.createElement("h1",{className:"pm-h1 docs-desc-title docs-desc-title--head",id:"introduction"},t),a.a.createElement(P.b,{comments:e.comments,teamUsers:e.teamUsers,user:e.user,onCommentCreate:e.onCommentCreate,onCommentDelete:e.onCommentDelete,onCommentUpdate:e.onCommentUpdate}))}function DescriptionTitle(e){var t=l.a.get(e,"item.type");return"head"===t?a.a.createElement(CollectionTitle,e):"folder"===t?a.a.createElement(FolderTitle,e):a.a.createElement(RequestTitle,e)}function DescriptionBody_extends(){return(DescriptionBody_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function DescriptionBody_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function DescriptionBody_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function KeyValueTableRow(e){var t=l.a.get(e,"row",{});return t.key?a.a.createElement("tr",{className:t.disabled?"disabled":""},a.a.createElement("td",{className:"weight--medium"},t.key),a.a.createElement("td",null,t.value,a.a.createElement(m.O,{skipMarkdownParsing:!0,className:"pm-markdown docs-request-table__desc",source:"string"==typeof t.description?t.description:l.a.get(t,"description.content")}))):null}function KeyValueTable(e){var t=e.rows,n=e.currentEnvironment,o=l.a.get(n,"data.values");return Array.isArray(t)?(Array.isArray(o)&&o.length>0&&(t=t.map(function(e){return function DescriptionBody_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DescriptionBody_ownKeys(Object(n),!0).forEach(function(t){DescriptionBody_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DescriptionBody_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},e,{key:e.key,value:e.value,description:e.description})})),a.a.createElement("table",{className:"pm-table docs-request-table"},a.a.createElement("tbody",null,t.map(function(e,t){return a.a.createElement(KeyValueTableRow,{key:t,row:e})})))):null}function GraphqlBody(e){var t=e.content,n=l.a.get(t,"query",""),i=l.a.get(t,"variables","");return a.a.createElement(o.Fragment,null,n&&a.a.createElement(o.Fragment,null,a.a.createElement("h4",{className:"docs-request-body__secondary-regular"},"query"),a.a.createElement("pre",{className:"docs-request-body__graphql-query"},a.a.createElement("code",null,n))),i&&a.a.createElement(o.Fragment,null,a.a.createElement("h4",{className:"docs-request-body__secondary-regular"},"graphql variables"),a.a.createElement("pre",{className:"docs-request-body__graphql-variables"},a.a.createElement("code",null,i))))}function RequestHeaders(e){var t=l.a.get(e,"item.request.header");return Array.isArray(t)&&t.length?a.a.createElement("div",{className:"docs-request-headers"},a.a.createElement("h4",{className:"pm-h4"},"Headers"),a.a.createElement(KeyValueTable,DescriptionBody_extends({rows:t},e))):null}function RequestParams(e){var t=l.a.get(e,"item.request.urlObject.query");return Array.isArray(t)&&t.length?a.a.createElement("div",{className:"docs-request-params"},a.a.createElement("h4",{className:"pm-h4"},"Params"),a.a.createElement(KeyValueTable,DescriptionBody_extends({rows:t},e))):null}function RequestPathVariables(e){var t=l.a.get(e,"item.request.urlObject.variable");return Array.isArray(t)&&t.length?a.a.createElement("div",{className:"docs-request-params"},a.a.createElement("h4",{className:"pm-h4"},"Path Variables"),a.a.createElement(KeyValueTable,DescriptionBody_extends({rows:t},e))):null}function RequestBodyContent(e){var t=l.a.get(e,"body.mode"),n=l.a.get(e,"body.".concat(t));return"file"===t?null:"raw"===t?a.a.createElement("pre",{className:"docs-request-body__raw"},a.a.createElement("code",null,n)):"graphql"===t?a.a.createElement(GraphqlBody,DescriptionBody_extends({content:n},e)):a.a.createElement(KeyValueTable,DescriptionBody_extends({rows:n},e))}function RequestBody(e){var t=l.a.get(e,"item.request.body");return function isRequestBodyEmpty(e){if("graphql"===l.a.get(e,"mode")){var t=l.a.get(e,"graphql.query"),n=l.a.get(e,"graphql.variables");return Boolean(!t&&!n)}return!l.a.get(e,[l.a.get(e,"mode")])}(t)?null:a.a.createElement("div",{className:"docs-request-body"},a.a.createElement("h4",{className:"pm-h4 docs-request-body__title"},"Body"),a.a.createElement("span",{className:"docs-request-body__mode push-half--left"},"raw"===t.mode?function parseBodyModeFromHeaders(e){var t,n=l.a.get(e,"item.request.header");return Array.isArray(n)&&n.length?(t=l.a.find(n,function(e){return!e.disabled&&"string"==typeof e.key&&"content-type"===e.key.toLowerCase()}),"raw (".concat(t&&t.value||"text",")")):"raw (text)"}(e):t.mode),a.a.createElement(RequestBodyContent,DescriptionBody_extends({body:t},e)))}function DescriptionBody(e){var t=l.a.get(e,"item",{});return"request"===t.type?a.a.createElement("div",{className:"docs-desc-body"},a.a.createElement(m.O,{skipMarkdownParsing:!0,className:"pm-markdown",source:l.a.get(t,"request.description","")}),a.a.createElement(RequestHeaders,e),a.a.createElement(RequestParams,e),a.a.createElement(RequestPathVariables,e),a.a.createElement(RequestBody,e)):a.a.createElement(m.O,{skipMarkdownParsing:!0,className:"docs-desc-body pm-markdown",source:t.description})}function Description(e){return a.a.createElement("div",{className:"docs-desc"},a.a.createElement(DescriptionTitle,e),a.a.createElement(DescriptionBody,e))}function Example_typeof(e){return(Example_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Example_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Example_possibleConstructorReturn(e,t){return!t||"object"!==Example_typeof(t)&&"function"!=typeof t?function Example_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Example_getPrototypeOf(e){return(Example_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Example_setPrototypeOf(e,t){return(Example_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function Example_extends(){return(Example_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function SnippetHeader(e){var t,n,o=e.title,i=e.selectable,r=e.onChange,s=e.selectedExample,u=e.status,p=l.a.get(e,"example",[]);return p.length&&i?p.length>1?(p.map(function(e,t){e._index=t}),t=a.a.createElement("div",{className:"docs-example__response-title docs-example__response-title--flush"},a.a.createElement(c.TextDropdown,{className:"docs-example__response-dropdown pm-select-text--dark pm-select--align-right",label:l.a.get(p,[s,"name"]),labelKey:"name",options:p,size:"sm",valueKey:"_index",onChange:r}))):t=a.a.createElement("span",{className:"docs-example__response-title",title:l.a.get(p,"[0].name")},l.a.get(p,"[0].name")):t=null,u&&(n=a.a.createElement("span",{className:"docs-example__response-status",title:u},u)),a.a.createElement("div",{className:"docs-example__snippet-header"},a.a.createElement("span",{className:"docs-example__snippet-type"},o),t,n)}function ExampleRequest(e){var t=e.selectedExample,n=e.currentLanguage,o=e.preferences,i=l.a.get(e,"example",""),r=l.a.get(i,[t,"snippet",l.a.get(n,"key","")],"")[l.a.get(n,"variant","")],s=l.a.get(o,"wrap");return a.a.createElement("div",{className:"docs-example__request"},a.a.createElement(SnippetHeader,Example_extends({selectable:!0,title:"Example Request"},e)),a.a.createElement(c.Snippet,{code:r,highlightSnippet:e.highlightSnippet,language:n.name,maxLines:15,toggleWrap:function toggleWrap(){e.onPreferenceChange(s)},wrap:s,onExpandOpen:function onExpandOpen(){e.onSnippetExpand({code:r,language:n.name,title:l.a.get(i,[t,"name"])})}}))}function ExampleResponse(e){var t=e.selectedExample,n=e.preferences,o=l.a.get(e,["example",t],{}),i=l.a.get(n,"wrap"),r=l.a.get(o,"response.body"),s=l.a.get(o,"response._postman_previewlanguage"),u=l.a.get(o,"response.code"),p=l.a.get(o,"response.status"),m=u&&p?"".concat(u," ").concat(p):null;return l.a.get(o,"response.body")?a.a.createElement("div",{className:"docs-example__response"},a.a.createElement(SnippetHeader,Example_extends({status:m,title:"Example Response"},e)),a.a.createElement(c.Snippet,{code:r,highlightSnippet:e.highlightSnippet,language:s,toggleWrap:function toggleWrap(){e.onPreferenceChange(i)},wrap:i,onExpandOpen:function onExpandOpen(){e.onSnippetExpand({code:r,language:s,title:l.a.get(o,"name")})}})):null}var S=function(e){function Example(e){var t;return function Example_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Example),(t=Example_possibleConstructorReturn(this,Example_getPrototypeOf(Example).call(this,e))).state={selectedExample:e.activeResponse||0,highlightSnippet:!0},t}return function Example_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Example_setPrototypeOf(e,t)}(Example,o["Component"]),function Example_createClass(e,t,n){return t&&Example_defineProperties(e.prototype,t),n&&Example_defineProperties(e,n),e}(Example,[{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){this.getHighlightSnippetsSetting(e)}},{key:"getHighlightSnippetsSetting",value:function getHighlightSnippetsSetting(e){var t=e.currentLanguage,n=e.documentationSettings,o=l.a.get(n,"languages",[]).filter(function(e){return e.key===t.key&&e.variant===t.variant})[0],a=!0;o&&o.options&&o.options.forEach(function(e){"prettify"===e.id&&(a=e.value)}),this.state.highlightSnippet!==a&&this.setState({highlightSnippet:a})}},{key:"render",value:function render(){var e=this,t=l.a.get(this.props,["examples","byId",this.props.item._postman_id],[]);return this.props.loadingExamples||this.props.errorLoadingExamples?null:a.a.createElement("div",{className:"docs-example"},a.a.createElement(ExampleRequest,Example_extends({},this.props,{example:t,highlightSnippet:this.state.highlightSnippet,selectedExample:this.state.selectedExample,onChange:function onChange(t){e.setState({selectedExample:t._index})}})),Array.isArray(t)&&t.length&&a.a.createElement(ExampleResponse,Example_extends({},this.props,{example:t,highlightSnippet:this.state.highlightSnippet,selectedExample:this.state.selectedExample})))}}]),Example}();function DocItem(e){var t=e.item,n=t.type,o=t._postman_id;return a.a.createElement("div",{className:"docs-item",id:o},a.a.createElement(Description,e),"request"===n&&a.a.createElement(S,e))}function ConfigBar_typeof(e){return(ConfigBar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ConfigBar_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function ConfigBar_getPrototypeOf(e){return(ConfigBar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ConfigBar_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ConfigBar_setPrototypeOf(e,t){return(ConfigBar_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var k=function(e){function EnvironmentSelector(e){var t;return function ConfigBar_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,EnvironmentSelector),(t=function ConfigBar_possibleConstructorReturn(e,t){return!t||"object"!==ConfigBar_typeof(t)&&"function"!=typeof t?ConfigBar_assertThisInitialized(e):t}(this,ConfigBar_getPrototypeOf(EnvironmentSelector).call(this,e))).state={selectedEnvironment:t.props.currentEnvironment.label},t.handleSelectEnvironment=t.handleSelectEnvironment.bind(ConfigBar_assertThisInitialized(t)),t}return function ConfigBar_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ConfigBar_setPrototypeOf(e,t)}(EnvironmentSelector,o["Component"]),function ConfigBar_createClass(e,t,n){return t&&ConfigBar_defineProperties(e.prototype,t),n&&ConfigBar_defineProperties(e,n),e}(EnvironmentSelector,[{key:"handleSelectEnvironment",value:function handleSelectEnvironment(e){var t=this;this.setState({selectedEnvironment:e.label},function(){t.props.onEnvironmentChange(e)})}},{key:"render",value:function render(){var e=this;return a.a.createElement("div",{className:"docs-config__selector environment-selector"},a.a.createElement("label",null,"Environment"),a.a.createElement(c.SelectDropdown,{clearable:!0,searchable:!0,className:"environment-selector",label:"Search Environment",labelKey:"label",options:this.props.environments,size:"md",value:this.state.selectedEnvironment,valueKey:"label",onBlur:function onBlur(){e.setState({selectedEnvironment:e.props.currentEnvironment.label})},onChange:this.handleSelectEnvironment,onFocus:function onFocus(){e.setState({selectedEnvironment:""})}}))}}]),EnvironmentSelector}();function LayoutSelector(e){var t=[{label:"Single Column",value:"single"},{label:"Double Column",value:"double"}];return a.a.createElement("div",{className:"docs-config__selector docs-config__selector--layout"},a.a.createElement("label",null,"Layout"),a.a.createElement(c.TextDropdown,{label:"single"===e.layout?t[0].label:t[1].label,options:t,size:"md",value:e.layout,onChange:function onChange(t){e.onLayoutChange(t.value)}}))}function ConfigBar(e){return a.a.createElement("div",{className:"docs-config"},a.a.createElement(k,{currentEnvironment:e.currentEnvironment,environments:e.environments,onEnvironmentChange:e.onEnvironmentChange}),a.a.createElement(LayoutSelector,{collectionId:e.collectionId,layout:e.layout,onLayoutChange:e.onLayoutChange}))}function LanguageConfigBar_typeof(e){return(LanguageConfigBar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LanguageConfigBar_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function LanguageConfigBar_getPrototypeOf(e){return(LanguageConfigBar_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LanguageConfigBar_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LanguageConfigBar_setPrototypeOf(e,t){return(LanguageConfigBar_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var I=function(e){function LanguageConfigBar(e){var t;return function LanguageConfigBar_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LanguageConfigBar),(t=function LanguageConfigBar_possibleConstructorReturn(e,t){return!t||"object"!==LanguageConfigBar_typeof(t)&&"function"!=typeof t?LanguageConfigBar_assertThisInitialized(e):t}(this,LanguageConfigBar_getPrototypeOf(LanguageConfigBar).call(this,e))).state={selectedLanguage:t.props.selectedLanguage,languageSelectorPlaceHolder:t.props.currentLanguage.name},t.handleSelectLanguage=t.handleSelectLanguage.bind(LanguageConfigBar_assertThisInitialized(t)),t}return function LanguageConfigBar_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LanguageConfigBar_setPrototypeOf(e,t)}(LanguageConfigBar,o["Component"]),function LanguageConfigBar_createClass(e,t,n){return t&&LanguageConfigBar_defineProperties(e.prototype,t),n&&LanguageConfigBar_defineProperties(e,n),e}(LanguageConfigBar,[{key:"handleSelectLanguage",value:function handleSelectLanguage(e){var t=this;this.setState({selectedLanguage:e,languageSelectorPlaceHolder:e.name},function(){t.props.onLanguageChange(e)})}},{key:"render",value:function render(){var e=this,t=this.props,n=t.documentationSettings,o=t.loadingExamples,i=n.languages;return a.a.createElement("div",{className:"docs-config"},a.a.createElement("div",{className:p()("docs-config__selector",{"loading-examples":this.props.loadingExamples})},a.a.createElement("label",null," Language "),a.a.createElement(c.SelectDropdown,{clearable:!0,searchable:!0,className:"language-selector",disabled:o,label:"Search Language",labelKey:"name",options:i,placeholder:"Search Language",size:"md",value:this.state.languageSelectorPlaceHolder,valueKey:"name",onBlur:function onBlur(){e.setState({languageSelectorPlaceHolder:e.props.currentLanguage.name})},onChange:function onChange(t){e.handleSelectLanguage(t)},onFocus:function onFocus(){e.setState({languageSelectorPlaceHolder:""})}})),a.a.createElement(c.Icon,{className:"language-settings",languages:this.props.languages,name:"settings",size:"sm",onClick:this.props.onShowLanguageSettingsModal}))}}]),LanguageConfigBar}();var N=Object(r.b)(function LanguageConfigBar_mapStateToProps(e){return{loadingExamples:(l.a.get(e,"collection.documenter")||{}).loadingExamples,userData:l.a.get(e,"shared.userData.user")||{}}})(I);function DocBody_extends(){return(DocBody_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function DocBody_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function DocBody_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?DocBody_ownKeys(Object(n),!0).forEach(function(t){DocBody_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):DocBody_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function DocBody_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DocBody_typeof(e){return(DocBody_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function DocBody(e){var t=e.collectionInfo,n=e.items,o=e.collectionResponses,i=e.location,r=e.flattenedCollection,s=Array.isArray(n)&&!n.length,l=function findResponseIndex(e,t){var n={};return"object"===DocBody_typeof(e)&&Object.keys(e).every(function(o){var a=e[o].indexOf(t);return!(a>-1&&(n.index=a,n.request=o,1))}),n}(o,i.hash.replace("#",""));return e.changingEnvironment?a.a.createElement("div",{className:"docs-body"},a.a.createElement(m.K,null)):a.a.createElement("div",{className:"docs-body docs-body--".concat(e.layout,"-col")},a.a.createElement("div",{className:"docs-configs"},a.a.createElement(ConfigBar,{collectionId:e.params.id,currentEnvironment:e.currentEnvironment,currentLanguage:e.currentLanguage,environments:e.environments,languages:e.languages,layout:e.layout,onEnvironmentChange:e.onEnvironmentChange,onLanguageChange:e.onLanguageChange,onLayoutChange:e.onLayoutChange}),a.a.createElement("div",{className:"language-config-settings"},a.a.createElement(N,{currentLanguage:e.currentLanguage,documentationSettings:e.documentationSettings,languages:e.languages,onLanguageChange:e.onLanguageChange,onShowLanguageSettingsModal:e.onShowLanguageSettingsModal}))),a.a.createElement(DocItem,{comments:DocBody_objectSpread({},e.comments,{data:e.comments.data.filter(function(e){return!e.anchor})}),documentationSettings:e.documentationSettings,item:DocBody_objectSpread({type:"head"},t),teamUsers:e.teamUsers,user:e.user,onCommentCreate:e.onCommentCreate,onCommentDelete:e.onCommentDelete,onCommentUpdate:e.onCommentUpdate}),e.loadingExamples&&a.a.createElement("div",{className:"docs-body__example-loader"},a.a.createElement(c.Loader,{pmStyle:"secondary",size:"md"})),s?a.a.createElement(NoRequestsBody,null):r.map(function(t){var n="request"===t.type?{user:e.user,comments:DocBody_objectSpread({},e.comments,{data:e.comments.data.filter(function(e){return e.anchor==="request/".concat(t._postman_id)})}),onCommentCreate:e.onCommentCreate,onCommentDelete:e.onCommentDelete,onCommentUpdate:e.onCommentUpdate}:{};return a.a.createElement(DocItem,DocBody_extends({activeResponse:l.request===t._postman_id?l.index:0,item:t,key:t._postman_id},e,n))}))}function OverlaySidenav_typeof(e){return(OverlaySidenav_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function OverlaySidenav_extends(){return(OverlaySidenav_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function OverlaySidenav_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function OverlaySidenav_possibleConstructorReturn(e,t){return!t||"object"!==OverlaySidenav_typeof(t)&&"function"!=typeof t?function OverlaySidenav_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function OverlaySidenav_getPrototypeOf(e){return(OverlaySidenav_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function OverlaySidenav_setPrototypeOf(e,t){return(OverlaySidenav_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var T=function(e){function OverlaySidenav(e){var t;return function OverlaySidenav_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,OverlaySidenav),(t=OverlaySidenav_possibleConstructorReturn(this,OverlaySidenav_getPrototypeOf(OverlaySidenav).call(this,e))).state={overlayOpen:!1},t}return function OverlaySidenav_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&OverlaySidenav_setPrototypeOf(e,t)}(OverlaySidenav,o["Component"]),function OverlaySidenav_createClass(e,t,n){return t&&OverlaySidenav_defineProperties(e.prototype,t),n&&OverlaySidenav_defineProperties(e,n),e}(OverlaySidenav,[{key:"render",value:function render(){var e=this;return a.a.createElement("div",{className:"overlay-sidenav"},a.a.createElement(OverlayButton,OverlaySidenav_extends({isOverlayOpen:this.state.overlayOpen},this.props,{onClick:function onClick(){e.setState({overlayOpen:!0})}})),a.a.createElement(OverlayContent,OverlaySidenav_extends({isOpen:this.state.overlayOpen,onOverlayItemClick:function onOverlayItemClick(){e.setState({overlayOpen:!1})},onSidebarClose:function onSidebarClose(){e.setState({overlayOpen:!1})}},this.props)))}}]),OverlaySidenav}();function OverlayButton(e){var t=e.onClick,n=e.isOverlayOpen;return a.a.createElement(c.Button,{className:n?"overlay-sidenav__invoke-btn--clicked":"overlay-sidenav__invoke-btn",icon:"sort",iconSize:"sm",size:"lg",onClick:t})}function OverlayContent(e){var t=e.isOpen,n=e.emptyMessage,i=e.noItem,r=e.children,s=e.onOverlayItemClick,l=e.heading,u=e.onSidebarClose,p=e.noTitle;return a.a.createElement("div",{className:t?"overlay-sidenav__content--open":"overlay-sidenav__content"},a.a.createElement("div",{className:"overlay-sidenav__header"},a.a.createElement("h2",{className:p?"overlay-sidenav__no-title":"overlay-sidenav__title"},l),a.a.createElement(c.Button,{className:"overlay-sidenav__close-btn",icon:"close-big",iconSize:"sm",pmStyle:"secondary",size:"md",onClick:u})),a.a.createElement("div",{className:"overlay-sidenav__navigator"},i?a.a.createElement("div",{className:"overlay-sidenav__empty"},n):a.a.createElement("div",null,Object(o.cloneElement)(r,{onOverlayItemClick:s}))))}function documenter_typeof(e){return(documenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function documenter_extends(){return(documenter_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function documenter_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function documenter_possibleConstructorReturn(e,t){return!t||"object"!==documenter_typeof(t)&&"function"!=typeof t?function documenter_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function documenter_getPrototypeOf(e){return(documenter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function documenter_setPrototypeOf(e,t){return(documenter_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var D=function(e){function Documentation(){return function documenter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Documentation),documenter_possibleConstructorReturn(this,documenter_getPrototypeOf(Documentation).apply(this,arguments))}return function documenter_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&documenter_setPrototypeOf(e,t)}(Documentation,o["Component"]),function documenter_createClass(e,t,n){return t&&documenter_defineProperties(e.prototype,t),n&&documenter_defineProperties(e,n),e}(Documentation,[{key:"render",value:function render(){var e=this.props.items,t=void 0===e?[]:e,n=!t||0===t.length,i=this.props.flattenedCollection;return a.a.createElement(o.Fragment,null,a.a.createElement(T,{emptyMessage:"This is where requests saved in your collections would appear.",heading:this.props.collectionName,noItem:n},a.a.createElement(O,{inOverlay:!0,collectionInfo:this.props.collectionInfo,items:t})),a.a.createElement(O,{collectionInfo:this.props.collectionInfo,items:t}),a.a.createElement(DocBody,documenter_extends({},this.props,{flattenedCollection:i,onEnvironmentChange:this.props.onEnvironmentChange,onLanguageChange:this.props.onLanguageChange,onLayoutChange:this.props.onLayoutChange,onShowLanguageSettingsModal:this.props.onShowLanguageSettingsModal})))}}]),Documentation}(),j=n("o9Si");function LanguageSettingsModal_typeof(e){return(LanguageSettingsModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function LanguageSettingsModal_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function LanguageSettingsModal_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?LanguageSettingsModal_ownKeys(Object(n),!0).forEach(function(t){LanguageSettingsModal_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):LanguageSettingsModal_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function LanguageSettingsModal_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function LanguageSettingsModal_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function LanguageSettingsModal_getPrototypeOf(e){return(LanguageSettingsModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function LanguageSettingsModal_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function LanguageSettingsModal_setPrototypeOf(e,t){return(LanguageSettingsModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var M=function(e){function LanguageSettingsModal(e){var t;return function LanguageSettingsModal_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,LanguageSettingsModal),(t=function LanguageSettingsModal_possibleConstructorReturn(e,t){return!t||"object"!==LanguageSettingsModal_typeof(t)&&"function"!=typeof t?LanguageSettingsModal_assertThisInitialized(e):t}(this,LanguageSettingsModal_getPrototypeOf(LanguageSettingsModal).call(this,e))).languagesListRef=a.a.createRef(),t.state={filterText:null,documentationSettings:t.props.documentationSettings,languagesList:t.props.documentationSettings.languages,selectedLanguage:t.fetchSettings(),updatedLanguages:[]},t.handleSaveSettings=t.handleSaveSettings.bind(LanguageSettingsModal_assertThisInitialized(t)),t.handleSettingsChange=t.handleSettingsChange.bind(LanguageSettingsModal_assertThisInitialized(t)),t.handleLanguageSelect=t.handleLanguageSelect.bind(LanguageSettingsModal_assertThisInitialized(t)),t}return function LanguageSettingsModal_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&LanguageSettingsModal_setPrototypeOf(e,t)}(LanguageSettingsModal,o["Component"]),function LanguageSettingsModal_createClass(e,t,n){return t&&LanguageSettingsModal_defineProperties(e.prototype,t),n&&LanguageSettingsModal_defineProperties(e,n),e}(LanguageSettingsModal,[{key:"componentDidMount",value:function componentDidMount(){this.scrollSelectedLanguageIntoView()}},{key:"scrollSelectedLanguageIntoView",value:function scrollSelectedLanguageIntoView(){var e=this.languagesListRef&&this.languagesListRef.current.getElementsByClassName("selected");e&&e[0]&&e[0].scrollIntoViewIfNeeded()}},{key:"handleLanguageSelect",value:function handleLanguageSelect(e){if(!this.props.updatingDocumentationSettings){var t=this.processLanguageSettings(e);this.setState({selectedLanguage:t})}}},{key:"fetchSettings",value:function fetchSettings(){var e=this,t=this.props&&this.props.documentationSettings.languages.filter(function(t){return t.key===e.props.currentLanguage.key&&t.variant===e.props.currentLanguage.variant});return this.processLanguageSettings(t[0])}},{key:"handleSettingsChange",value:function handleSettingsChange(e,t){var n=LanguageSettingsModal_objectSpread({},e);if("boolean"===n.type.toLowerCase())n.value=!n.value;else if("positiveInteger"===n.type){var o=parseInt(t);l.a.isFinite(o)?n.value=o:n.value=0}else"enum"===n.type&&(n.value=t.value);var a=this.state.selectedLanguage.options.map(function(e){return e.id===n.id?n:e}),i=LanguageSettingsModal_objectSpread({},this.state.selectedLanguage);i.options=a,this.setState({selectedLanguage:i})}},{key:"processLanguageSettings",value:function processLanguageSettings(e){var t=e.options.map(function(e){if("enum"===e.type){var t=e.availableOptions.map(function(e){return{label:e,value:e}});return e.options=t,e}return e});return e.options=t,e}},{key:"handleFilterLanguages",value:function handleFilterLanguages(e){e&&""!==e?this.setState({filterText:e,languagesList:l.a.filter(this.props.documentationSettings.languages,function(t){return t.name.toLowerCase().includes(e.toLowerCase())})}):this.setState({filterText:e,languagesList:this.props.documentationSettings.languages})}},{key:"handleSaveSettings",value:function handleSaveSettings(){for(var e=this,t=LanguageSettingsModal_objectSpread({},this.state.documentationSettings),n=this.state.updatedLanguages,o=0;o<t.languages.length;o++)if(t.languages[o].name===this.state.selectedLanguage.name){t.languages[o]=this.state.selectedLanguage;break}n.push(this.state.selectedLanguage.name),this.setState({documentationSettings:t,updatedLanguages:n},function(){window.pm.actions.updateDocumentationSettings({collectionId:e.props.entity.collectionId,userId:e.props.entity.userId,documentationSettings:t,updatedLanguages:e.state.updatedLanguages,updatedLanguage:e.state.selectedLanguage.name})})}},{key:"render",value:function render(){var e=this;return a.a.createElement(c.Card,{className:"language-settings-container"},a.a.createElement("div",{className:"language-settings-header"},a.a.createElement("h2",{className:"title"}," Language Settings "),a.a.createElement("div",{className:"language-settings-actions"},a.a.createElement("div",{className:"actions"},a.a.createElement("h3",{className:"contribute-github"},a.a.createElement("a",{className:"contribute-github pm-link",href:"https://github.com/postmanlabs/postman-code-generators",rel:"noopener noreferrer",target:"_blank"},"Contribute on Github")),a.a.createElement(c.Button,{className:"language-settings-close-btn",disabled:this.props.updatingDocumentationSettings,icon:"close-big",iconSize:"sm",pmStyle:"alternate",size:"sm",onClick:this.props.onCancel})))),a.a.createElement("div",{className:"language-list-settings"},a.a.createElement("div",{className:"language-list-container"},a.a.createElement(c.Field,{icon:"search",placeholder:"Filter languages",size:"sm",value:this.state.filterText||"",onChange:function onChange(t){e.handleFilterLanguages(t.target.value)}}),a.a.createElement("div",{className:p()("languages-list",{updating:this.props.updatingDocumentationSettings}),ref:this.languagesListRef},this.state.languagesList.map(function(t){return a.a.createElement("div",{className:p()("languages-list-item",{selected:e.state.selectedLanguage&&e.state.selectedLanguage.name===t.name}),key:t.name,onClick:function onClick(){e.handleLanguageSelect(t)}},t.name)}))),a.a.createElement("div",{className:"language-settings"},a.a.createElement("h2",{className:"language-settings-heading"},"Settings for ",a.a.createElement("span",{className:"language-title"},this.state.selectedLanguage.name)),a.a.createElement("div",{className:"language-settings-content"},this.state.selectedLanguage&&this.state.selectedLanguage.options.map(function(t){var n=t.type,o=t.value;if("positiveInteger"===n){var i=parseInt(o);o=l.a.isFinite(i)?i:0}return a.a.createElement("div",{className:"setting",key:t.id},a.a.createElement("div",{className:"question"},a.a.createElement("h3",null," ",t.name," "),a.a.createElement("p",null," ",t.description," ")),a.a.createElement("div",{className:"setting-values"},t&&"positiveInteger"===n&&a.a.createElement(c.Field,{min:0,placeholder:o,size:"sm",type:"number",value:o,onChange:function onChange(n){e.handleSettingsChange(t,n.target.value)}}),t&&("boolean"===n||"Boolean"===n)&&a.a.createElement("div",{className:"setting-".concat(t.value?"on":"off")},a.a.createElement(c.Switch,{inline:!0,checked:t.value,label:"".concat(t.value?"ON":"OFF"),size:"sm",onChange:function onChange(n){e.handleSettingsChange(t,n.target.value)}})),t&&"enum"===n&&a.a.createElement(c.SelectDropdown,{block:!0,clearable:!0,className:"setting-enum",options:t.options,searchable:!1,value:t.value,onChange:function onChange(n){e.handleSettingsChange(t,n)}})))})),a.a.createElement("div",{className:"language-settings-footer"},a.a.createElement(c.Button,{disabled:this.props.updatingDocumentationSettings,pmStyle:"primary",size:"sm",onClick:this.handleSaveSettings},this.props.updatingDocumentationSettings&&a.a.createElement(c.Loader,null)," Save Settings")))))}}]),LanguageSettingsModal}();M.defaultProps={inputProps:{}};var x=Object(r.b)(function LanguageSettingsModal_mapStateToProps(e){return{updatingDocumentationSettings:(l.a.get(e,"collection.documenter")||{}).updatingDocumentationSettings,userData:l.a.get(e,"shared.userData.user")||{}}},l.a.pick(j.b,["hideModal"]))(M),L=n("ttZb"),R=n("LIIV");function _templateObject(){var e=function _taggedTemplateLiteral(e,t){t||(t=e.slice(0));return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\n  query ($id: ID!) {\n    collection(id: $id) {\n      name\n    }\n  }\n"]);return _templateObject=function _templateObject(){return e},e}var A=Object(R.b)(_templateObject());function EmptyStateBody(e){return a.a.createElement("div",{className:"request-access__permission__description"},"The ",e.entityType," ",a.a.createElement("strong",null,e.entityName)," hasn't been shared with you.",a.a.createElement("br",null),"Request access to view or edit.")}function RequestPermission(e){var t=e.location.pathname.split("/"),n=e.entityType,i=t[2],r=a.a.createElement(c.Button,{className:"request-access__permission-btn",pmStyle:"primary",size:"md",onClick:function onClick(){d.s.goToRoute("/request-access?entityType=".concat(n,"&entityId=").concat(i,"&type=share_entity"))}},"Request Access"),s=Object(L.b)(A,{variables:{id:i}}),u=s.loading,p=s.data;return Object(o.useEffect)(function(){d.a.recordEvent("collectionAccess")},[]),u||l.a.isEmpty(p)?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):a.a.createElement(m.r,null,a.a.createElement("div",{className:"request-access__permission"},a.a.createElement(m.v,{action:r,body:a.a.createElement(EmptyStateBody,{entityName:l.a.get(p,[n,"name"],""),entityType:n}),imageSrc:"".concat("https://static.postman.co/img","/permissions.svg"),title:"You don't have access to this ".concat(n)})))}function Documenter_extends(){return(Documenter_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function Documenter_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function Documenter_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Documenter_ownKeys(Object(n),!0).forEach(function(t){Documenter_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Documenter_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function Documenter_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Documenter_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Documenter_getPrototypeOf(e){return(Documenter_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Documenter_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Documenter_setPrototypeOf(e,t){return(Documenter_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function Documenter_typeof(e){return(Documenter_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function scrollToHash(e,t){var n,o=e.hash,a=l.a.get(e,"query.anchor");o&&"string"==typeof o?(n=o.replace("#",""),"object"===Documenter_typeof(t)&&Object.keys(t).forEach(function(e){t[e].indexOf(n)>-1&&(n=e)})):a&&"string"==typeof a&&(n=a.split("/")[1]),n&&setTimeout(function(){var e=document.getElementById(n);e&&e.scrollIntoView()},0)}var z=function(e){function Documenter(e){var t;return function Documenter_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,Documenter),(t=function Documenter_possibleConstructorReturn(e,t){return!t||"object"!==Documenter_typeof(t)&&"function"!=typeof t?Documenter_assertThisInitialized(e):t}(this,Documenter_getPrototypeOf(Documenter).call(this,e))).handleEnvironmentChange=t.handleEnvironmentChange.bind(Documenter_assertThisInitialized(t)),t.handleLanguageChange=t.handleLanguageChange.bind(Documenter_assertThisInitialized(t)),t.handleLayoutChange=t.handleLayoutChange.bind(Documenter_assertThisInitialized(t)),t.handleCommentCreate=t.handleCommentCreate.bind(Documenter_assertThisInitialized(t)),t.handleCommentDelete=t.handleCommentDelete.bind(Documenter_assertThisInitialized(t)),t.handleCommentUpdate=t.handleCommentUpdate.bind(Documenter_assertThisInitialized(t)),t.handleShowLanguageSettingModal=t.handleShowLanguageSettingModal.bind(Documenter_assertThisInitialized(t)),t.handleCloseLanguageSettingsModal=t.handleCloseLanguageSettingsModal.bind(Documenter_assertThisInitialized(t)),t}return function Documenter_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Documenter_setPrototypeOf(e,t)}(Documenter,o["Component"]),function Documenter_createClass(e,t,n){return t&&Documenter_defineProperties(e.prototype,t),n&&Documenter_defineProperties(e,n),e}(Documenter,[{key:"componentDidMount",value:function componentDidMount(){d.a.recordEvent("documentationView",{meta:{url:window.location.href}}),d.a.recordEvent("documentationPrivateView",{meta:{url:window.location.href},entityId:this.props.params.id}),window.pm.actions.getWorkspaceEnvironments({workspaceId:this.props.activeWorkspace}),window.pm.actions.getDocumentation({collectionId:this.props.params.id,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version}),window.pm.actions.getExamples({collectionId:this.props.params.id,language:this.props.currentLanguage,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version}),window.pm.actions.getComments({modelId:this.props.params.id,model:"collection"}),window.pm.actions.getDocumentationSettings({collectionId:this.props.params.id,userId:this.props.user.id})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props,n=t.location,o=t.loading,a=t.collectionResponses,i=t.collectionName;n.query.anchor&&n.hash&&window.pm.actions.replace(Documenter_objectSpread({},n,{query:l.a.omit(n.query,["comment","anchor"])})),this.props.location.query.version!==e.location.query.version&&(window.pm.actions.getDocumentation({collectionId:this.props.params.id,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version}),window.pm.actions.getExamples({collectionId:this.props.params.id,language:this.props.currentLanguage,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version}),window.pm.actions.getDocumentationSettings({collectionId:this.props.params.id,userId:this.props.user.id})),e.loading&&!o&&scrollToHash(n,a),e.collectionName!==this.props.collectionName&&(document.title=i?i+" - Documentation":"Collection - Documentation")}},{key:"handleCommentCreate",value:function handleCommentCreate(e,t,n){window.pm.actions.createComment({body:e,anchor:n,tags:t,model:"collection",modelId:this.props.params.id,creator:this.props.user})}},{key:"handleCommentUpdate",value:function handleCommentUpdate(e){window.pm.actions.updateComment(e)}},{key:"handleCommentDelete",value:function handleCommentDelete(e){window.pm.actions.showModal({actionType:"error",type:"confirm",title:"Delete comment",body:"Are you sure you want to delete this comment? This cannot be undone.",confirmLabel:"Delete",onCancel:function onCancel(){window.pm.actions.hideModal()},onConfirm:function onConfirm(){window.pm.actions.hideModal(),window.pm.actions.deleteComment({commentId:e})}})}},{key:"handleEnvironmentChange",value:function handleEnvironmentChange(e){e.id!==this.props.currentEnvironment.id&&(window.pm.actions.changeEnvironment({collectionId:this.props.params.id,environment:e,versionId:this.props.location.query.version}),window.pm.actions.getExamples({collectionId:this.props.params.id,language:this.props.currentLanguage,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version}))}},{key:"handleLayoutChange",value:function handleLayoutChange(e){if(e!==this.props.layout){var t={layout:e};window.pm.actions.setDocumentationLayout({collectionId:this.props.params.id,userId:this.props.user.id,documentationSettings:t})}}},{key:"handleLanguageChange",value:function handleLanguageChange(e){e.key===this.props.currentLanguage.key&&e.variant===this.props.currentLanguage.variant||(d.a.recordEvent("documentationSelectLanguage"),d.a.recordEvent("documentationChangeLanguage",{entityId:this.props.params.id}),window.pm.actions.getExamples({language:e,collectionId:this.props.params.id,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version}),window.pm.actions.changeLanguage(e))}},{key:"handleShowLanguageSettingModal",value:function handleShowLanguageSettingModal(){var e={type:"language",name:this.props.params.name,id:this.props.params.id,collectionId:this.props.params.id,userId:this.props.user.id};window.pm.actions.showModal({children:a.a.createElement(x,{currentLanguage:this.props.currentLanguage,documentationSettings:this.props.documentationSettings,entity:e,onCancel:this.handleCloseLanguageSettingsModal})})}},{key:"handleCloseLanguageSettingsModal",value:function handleCloseLanguageSettingsModal(){window.pm.actions.hideModal();var e=this.props.currentLanguage.label+" - "+this.props.currentLanguage.variant;this.props.updatedDocumentationSettings&&this.props.updatedLanguages.includes(e)&&window.pm.actions.getExamples({collectionId:this.props.params.id,language:this.props.currentLanguage,environmentId:this.props.currentEnvironment.id,versionId:this.props.location.query.version})}},{key:"render",value:function render(){return this.props.loading?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):this.props.errorLoadingDocumentation?403===this.props.errorLoadingDocumentation.statusCode?a.a.createElement(RequestPermission,{entityType:"collection",location:this.props.location}):a.a.createElement(m.A,{description:this.props.errorLoadingDocumentation.message||"We were unable to load documentation. Please try again.",statusCode:this.props.errorLoadingDocumentation.statusCode}):a.a.createElement(D,Documenter_extends({},this.props,{documentationSettings:this.props.documentationSettings,focusedAnchor:this.props.location.query.anchor,onCommentCreate:this.handleCommentCreate,onCommentDelete:this.handleCommentDelete,onCommentUpdate:this.handleCommentUpdate,onEnvironmentChange:this.handleEnvironmentChange,onLanguageChange:this.handleLanguageChange,onLayoutChange:this.handleLayoutChange,onPreferenceChange:function onPreferenceChange(e){window.pm.actions.toggleWrapPreference(e)},onShowLanguageSettingsModal:this.handleShowLanguageSettingModal,onSnippetExpand:function onSnippetExpand(e){window.pm.actions.showModal(Documenter_objectSpread({},e,{type:"code"}))}}))}}]),Documenter}();var q=Object(r.b)(function Documenter_mapStateToProps(e,t){var n=e.shared.workspaces||{},o=n.active,a=l.a.get(n,["byId",o]),i=l.a.get(a,"dependencies.environments")||[],r=l.a.get(e,"collection.documenter")||{},s=r.documentationSettings,c=r.data,u=r.updatingDocumentationSettings,p=r.updatedDocumentationSettings,m=r.updatedLanguages,d=e.workspace.environments||{},h=l.a.get(r,"languages"),f=i.reduce(function(e,t){return d.byId[t]&&e.push(d.byId[t]),e},[]),g=l.a.get(e,"shared.userData.user")||{},y={id:l.a.get(e,"shared.userData.identity.user"),friendly:g.name||g.username||g.email,profilePicUrl:g.profile_pic_url},b=l.a.get(e,"collection.comments"),v=(f||[]).find(function(e){return e.id===l.a.get(r,"currentEnvironment.id")});return h&&h.map(function(e){e.key="".concat(e.target,"-").concat(e.client)}),f.sort(function(e){return l.a.includes(e.name,".template")?-1:1}),f.forEach(function(e){e.label=l.a.get(e,"name")}),f.unshift({data:{values:[]},id:null,label:"No Environment"}),{activeWorkspace:o,items:l.a.get(c.collection,"item"),collectionInfo:l.a.get(c.collection,"info"),environments:f,languages:l.a.get(c,"languages"),currentLanguage:e.collection.documenter.currentLanguage,layout:l.a.get(e,"collection.documenter.layout")||"double",currentEnvironment:v||f[0],errorLoadingDocumentation:r.error,errorLoadingExamples:r.errorExamples,loading:r.loadingPreferences||r.loadingDocumentation||l.a.get(e,"collection.meta.loading"),changingEnvironment:r.changingEnvironment,loadingExamples:r.loadingExamples,flattenedCollection:r.flattenedCollection,examples:r.examples,preferences:l.a.get(e,"shared.preferences"),collectionName:l.a.get(e,"collection.meta.name"),collectionResponses:r.responses,teamId:l.a.get(e,"shared.userData.identity.team"),user:y,comments:Documenter_objectSpread({},l.a.omit(b,["ids","byId"]),{data:Object.values(b.byId).filter(function(e){return"collection"===e.model&&e.modelId===t.params.id}).sort(function(e,t){return e.id-t.id})}),teamUsers:l.a.get(e,"shared.team.users.byId",{}),documentationSettings:s,updatingDocumentationSettings:u,updatedDocumentationSettings:p,updatedLanguages:m}})(z);function TagCollectionModal_typeof(e){return(TagCollectionModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function TagCollectionModal_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function TagCollectionModal_getPrototypeOf(e){return(TagCollectionModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function TagCollectionModal_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function TagCollectionModal_setPrototypeOf(e,t){return(TagCollectionModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var B=function(e){function TagCollectionModal(e){var t;return function TagCollectionModal_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,TagCollectionModal),(t=function TagCollectionModal_possibleConstructorReturn(e,t){return!t||"object"!==TagCollectionModal_typeof(t)&&"function"!=typeof t?TagCollectionModal_assertThisInitialized(e):t}(this,TagCollectionModal_getPrototypeOf(TagCollectionModal).call(this,e))).state={selectedApiId:null,selectedVersionId:null},t.handleApiSelect=t.handleApiSelect.bind(TagCollectionModal_assertThisInitialized(t)),t.handleVersionSelect=t.handleVersionSelect.bind(TagCollectionModal_assertThisInitialized(t)),t.handleTagCollection=t.handleTagCollection.bind(TagCollectionModal_assertThisInitialized(t)),t}return function TagCollectionModal_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&TagCollectionModal_setPrototypeOf(e,t)}(TagCollectionModal,o["Component"]),function TagCollectionModal_createClass(e,t,n){return t&&TagCollectionModal_defineProperties(e.prototype,t),n&&TagCollectionModal_defineProperties(e,n),e}(TagCollectionModal,[{key:"componentDidMount",value:function componentDidMount(){window.pm.actions.getTaggableCollectionApis({collectionId:this.props.collectionId,workspaceId:this.props.currentWorksapceId})}},{key:"handleApiSelect",value:function handleApiSelect(e){this.setState({selectedApiId:e&&e.value})}},{key:"handleVersionSelect",value:function handleVersionSelect(e){this.setState({selectedVersionId:e&&e.value})}},{key:"handleTagCollection",value:function handleTagCollection(){window.pm.actions.createCollectionVersion({revisionId:this.props.revisionId,collectionId:this.props.collectionId,apiId:this.state.selectedApiId,versionId:this.state.selectedVersionId,hideModal:!0})}},{key:"render",value:function render(){var e=this,t=((this.props.taggableApis||[]).find(function(t){return t.id===e.state.selectedApiId})||{}).versions||[],n=null;return n=this.props.loading?a.a.createElement(c.Loader,{className:"pm-absolute-center",pmStyle:"secondary",size:"md"}):this.props.error?a.a.createElement(m.A,{description:l.a.get(this.props,"error.message")||"Something went wrong while fetching entities of API",statusCode:l.a.get(this.props,"error.statusCode")}):a.a.createElement(o.Fragment,null,a.a.createElement("h5",{className:"pm-h5"},"Select an API"),a.a.createElement(c.SelectDropdown,{block:!0,className:"push-half--top",options:(this.props.taggableApis||[]).map(function(e){return{label:e.name,value:e.id}}),searchable:!1,size:"md",value:this.state.selectedApiId,onChange:this.handleApiSelect,onConfirm:this.handleConfirm}),a.a.createElement("h5",{className:"pm-h5"},"Select a version for selected API"),a.a.createElement(c.SelectDropdown,{block:!0,className:"push-half--top",disabled:!this.state.selectedApiId,label:"Select an API version",noResultsText:"All versions of selected API are tagged with this collection",options:(t||[]).map(function(e){return{label:e.name,value:e.id}}),searchable:!1,size:"md",value:this.state.selectedVersionId,onChange:this.handleVersionSelect,onConfirm:this.handleConfirm}),a.a.createElement(c.FormActions,{className:"push-double--top",confirmDisabled:!this.state.selectedApiId||!this.state.selectedVersionId,confirming:this.props.tagging,confirmText:"Tag Collection",size:"md",onCancel:this.props.hideModal,onConfirm:this.handleTagCollection})),a.a.createElement(c.Card,{className:"collection-tag"},a.a.createElement("h3",{className:"pm-h3"},"Tag Collection"),a.a.createElement(c.Button,{className:"collection-tag__close",icon:"close-big",pmStyle:"alternate",size:"sm",onClick:this.props.hideModal}),a.a.createElement("hr",{className:"push--ends"}),n)}}]),TagCollectionModal}();var U=Object(r.b)(function TagCollectionModal_mapStateToProps(e){var t=l.a.get(e,"collection.taggableApis"),n=l.a.get(e,["shared","workspaces","active"]),o=l.a.get(e,"collection.versions")||{};return{taggableApis:t.data||[],loading:t.loading,error:t.error,tagging:o.creating,currentWorksapceId:n}},l.a.pick(j.b,["hideModal"]))(B);function CollectionActivity_typeof(e){return(CollectionActivity_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CollectionActivity_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function CollectionActivity_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CollectionActivity_ownKeys(Object(n),!0).forEach(function(t){CollectionActivity_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CollectionActivity_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function CollectionActivity_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CollectionActivity_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CollectionActivity_getPrototypeOf(e){return(CollectionActivity_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CollectionActivity_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CollectionActivity_setPrototypeOf(e,t){return(CollectionActivity_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function LoadMore(e){var t=e.params,n=e.maxId,o=e.loadingMore;return a.a.createElement("div",{className:"text--center"},a.a.createElement("div",{className:"pm-link",onClick:function onClick(){window.pm.actions.getMoreCollectionActivity({collectionId:t.id,maxId:n})}},o?a.a.createElement(c.Loader,{pmStyle:"secondary"}):"Load More"))}var F=function(e){function CollectionActivity(e){var t;return function CollectionActivity_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionActivity),(t=function CollectionActivity_possibleConstructorReturn(e,t){return!t||"object"!==CollectionActivity_typeof(t)&&"function"!=typeof t?CollectionActivity_assertThisInitialized(e):t}(this,CollectionActivity_getPrototypeOf(CollectionActivity).call(this,e))).handleTagVersion=t.handleTagVersion.bind(CollectionActivity_assertThisInitialized(t)),t.handleRemoveTag=t.handleRemoveTag.bind(CollectionActivity_assertThisInitialized(t)),t}return function CollectionActivity_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CollectionActivity_setPrototypeOf(e,t)}(CollectionActivity,o["Component"]),function CollectionActivity_createClass(e,t,n){return t&&CollectionActivity_defineProperties(e.prototype,t),n&&CollectionActivity_defineProperties(e,n),e}(CollectionActivity,[{key:"componentDidMount",value:function componentDidMount(){window.pm.actions.getCollectionActivity({collectionId:this.props.params.id}),window.pm.actions.getWorkspaceApis({workspaceId:this.props.activeWorkspaceId}),d.a.recordEvent("viewChangeLog",{entityId:this.props.params.id})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){e.collectionName!==this.props.collectionName&&(document.title=this.props.collectionName?this.props.collectionName+" - Changelog":"Collection - Changelog")}},{key:"handleTagVersion",value:function handleTagVersion(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.a.recordEvent("initiateVersionTagCreate",{entityId:this.props.params.id}),window.pm.actions.showModal({children:a.a.createElement(U,{collectionId:this.props.params.id,revisionId:e.revisionId})})}},{key:"handleRemoveTag",value:function handleRemoveTag(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};d.a.recordEvent("versionTagDelete",{entityId:this.props.params.id}),window.pm.actions.deleteCollectionVersion({collectionId:this.props.params.id,versionTagId:e.versionTagId})}},{key:"render",value:function render(){var e=this.props,t=e.data,n=e.loading,o=e.userData,i=e.params,r=e.maxId,s=e.loadingMoreActivity,l=e.moreActivity,u=e.teamUsers,p=e.error;return n?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):p?a.a.createElement(m.A,{description:p.message||"We were unable to fetch activity. Please try again.",statusCode:p.statusCode}):a.a.createElement(m.r,{className:"docs__activity"},a.a.createElement(m.e,{isHoverable:!0,activityFeed:t,filter:{query:""},teamUsers:u,userData:o,onRemoveTag:this.handleRemoveTag,onTagVersion:this.handleTagVersion}),a.a.createElement("div",{className:"docs-activity__footer"},l?a.a.createElement(LoadMore,{loadingMore:s,maxId:r,params:i}):a.a.createElement("div",{className:"text--center pm-link disabled"},"No more activity.")))}}]),CollectionActivity}();var V=Object(r.b)(function CollectionActivity_mapStateToProps(e){var t=e.shared.userData,n=l.a.get(e,["shared","workspaces","active"]),o=e.collection.versions||{},a=o.data||[],i=l.a.get(e,"collection.activity",{});return CollectionActivity_objectSpread({},i,{activeWorkspaceId:n,data:(i.data||[]).map(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(e.tags||[]).find(function(e){return"latest"===e.id}),n=CollectionActivity_objectSpread({},e,{tags:a.filter(function(t){return t.revision===e.id}).map(function(e){return CollectionActivity_objectSpread({},e,{deleting:o.deleting.includes(e.id)})})});return t&&(n.tags||[]).push(t),n}),loading:i.loading||l.a.get(e,"collection.meta.loading"),userData:t,teamUsers:l.a.get(e,"shared.team.users"),collectionName:l.a.get(e,"collection.meta.name"),error:i.error})})(F),W=n("s4NR"),Q=n.n(W),K="".concat("https://static.postman.co/img","/team-public-profile-skeleton.svg"),H="".concat("https://static.postman.co/img","/team-public-profile-skeleton.svg"),Y="".concat("https://static.postman.co/img","/api-network-listing-skeleton.svg");function ProfilePreview(e){var t="user"===e.type?H:K,n="user"===e.type?"Add a summary to help users understand what you do.":"Add a team summary to help users understand what your team does.";return a.a.createElement("div",{className:"collection-publish-profile-preview pm-row"},a.a.createElement("div",{className:"collection-publish-profile-preview__logo pm-col-md-2 pm-col-xs-2"},e.logo),a.a.createElement("div",{className:"collection-publish-profile-preview-info pm-col-md-10 pm-col-xs-10"},a.a.createElement("h2",{className:"pm-h2",title:e.name},e.name),a.a.createElement("span",{className:p()({"collection-publish-profile-preview-info__description--empty":!e.description})},e.description||n)),a.a.createElement("div",{className:"collection-publish-profile-preview-skeleton pm-row"},a.a.createElement("img",{className:"pm-col-md-12 pm-col-xs-12",src:t})))}function ListingPreview(e){var t=e.name,n=e.summary,o=e.description,i=e.type,r=e.maxLengths,s="network"===i?"API":"template";return a.a.createElement("div",{className:"collection-publish-listing-preview"},a.a.createElement("div",{className:"pm-col-md-8 pm-col-xs-8"},a.a.createElement("h2",{className:"pm-h2",title:t},t),a.a.createElement("div",{className:p()("collection-publish-listing-preview__summary",{"collection-publish-listing-preview__summary--empty":!n})},l.a.truncate(n,{length:r.listingSummary})||"Your ".concat(s," summary will show up here")),a.a.createElement("div",{className:p()("collection-publish-listing-preview__description",{"collection-publish-listing-preview__description--empty":!o})},o?a.a.createElement(m.O,{className:"pm-markdown",source:o}):"Your ".concat(s," description will show up here"))),a.a.createElement("img",{className:"pm-col-md-4 pm-col-xs-4",src:Y}))}function PreviewPopover(e){return a.a.createElement(c.Popover,{closeOnClickOutside:!0,closeOnEscape:!0,align:"bottom",className:"collection-publish__preview-popover",content:e.content},function(t){return a.a.createElement("div",{className:"collection-publish__preview",ref:t.triggerRef,onClick:t.onClick},a.a.createElement(c.Icon,{name:"preview",pmStyle:"primary",size:"sm"}),e.label)})}function EntityPreview(e){var t=e.entity,n=e.entityId;if("user"!==t&&"team"!==t)return null;var o="user"===t,r=a.a.createElement(i.c,{className:"pm-link",to:"/settings/".concat(o?"me":"team","/public")},"Public Profile Settings."),s=o?a.a.createElement(c.UserIcon,{className:p()("collection-publish-entity-preview__image--user","collection-publish-entity-preview__image"),size:"sm",url:e.logo,userId:n}):a.a.createElement("img",{className:"collection-publish-entity-preview__image",src:e.logo}),l=a.a.createElement(PreviewPopover,{content:a.a.createElement(ProfilePreview,{description:e.description,logo:s,name:e.name,type:o?"user":"team"}),label:"Preview ".concat(o?"User":"Team"," profile")}),u=o?null:a.a.createElement("div",{className:"collection-publish-entity-preview__metrics"},a.a.createElement("span",{className:"entity-metric"},a.a.createElement("span",{className:"entity-metric__label"},"APIs: "),a.a.createElement("span",{className:"entity-metric__value"},e.metrics&&e.metrics.apiCount)),a.a.createElement("span",{className:"entity-metric"},a.a.createElement("span",{className:"entity-metric__label"},"Imports: "),a.a.createElement("span",{className:"entity-metric__value"},e.metrics&&e.metrics.importCount)));return a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement("div",{className:"collection-publish-entity-preview"},s&&s,a.a.createElement("h2",{className:"collection-publish-entity-preview__name",title:e.name},e.name),u),a.a.createElement("p",{className:"collection-publish__description"},"A public profile is required to publish this collection to the API Network. If your team doen’t have one, it will be created for you. You can customise it from ",r,l))}function CategoryCloud(e){var t=e.categorySelecthandler,n=e.allCategories,o=e.selectedCategories.map(function(e){return e.id});return a.a.createElement("div",{className:"collection-publish-categories"},n.map(function(e){return a.a.createElement(c.Badge,{clickable:!0,key:e.id,pmStyle:o.indexOf(e.id)>-1?"success":"secondary",value:e.id,onClick:function onClick(){t(e)}},e.name)}))}function PublishToNetworkForm(e){var t=e.apiName,n=e.apiSummary,o=e.apiDescription,i=e.maxLengths,r=Boolean(""===t||l.a.size(t)>i.listingName),s=Boolean(""===n||l.a.size(n)>i.listingSummary),u="API name cannot be empty or cannot exceed ".concat(i.listingName," characters"),p="API summary cannot be empty or cannot exceed ".concat(i.listingSummary," characters"),m=a.a.createElement(PreviewPopover,{content:a.a.createElement(ListingPreview,{description:o,maxLengths:i,name:t,summary:n,type:"network"}),label:"Preview Listing"}),d={apiCount:e.teamInformation.apiCount,importCount:e.teamInformation.importCount};return a.a.createElement("div",{className:"push-one-half--left"},a.a.createElement("label",{className:"collection-publish__label"},"Publish as"),a.a.createElement(EntityPreview,{description:e.teamInformation.description,entity:"team",logo:"".concat(e.teamInformation.logo,"?fp=").concat((new Date).getTime()),metrics:d,name:e.teamInformation.name}),a.a.createElement("label",{className:"collection-publish__label"},"Listing Name",a.a.createElement("span",null,l.a.size(t),"/",i.listingName)),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.Field,{block:!0,className:"pm-select--block",message:r?u:null,placeholder:"Eg. Link Checker",size:"md",status:r?"error":null,value:t,onChange:function onChange(t){e.onNameChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"This is the name your collection will have on the API Network.",m)),a.a.createElement("label",{className:"collection-publish__label"},"Listing Summary",a.a.createElement("span",null,l.a.size(n),"/",i.listingSummary)),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.Field,{block:!0,className:"pm-select--block",message:s?p:null,size:"md",status:s?"error":null,value:n,onChange:function onChange(t){e.onSummaryChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"Briefly state what the collection can do. This summary will appear on your team's public profile page.")),a.a.createElement("label",{className:"collection-publish__label"},"Listing Description"),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.TextArea,{className:"pm-select--block",rows:"5",size:"md",value:o,onChange:function onChange(t){e.onDescriptionChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"Give more details about the collection, such as:",a.a.createElement("br",null),"• What the collection provides (a feature overview),",a.a.createElement("br",null),"• Who the collection is for.",a.a.createElement("br",null),"The description will appear on the collection’s detail page. Markdown supported.")),a.a.createElement("label",{className:"collection-publish__label"},"Categories"),a.a.createElement(CategoryCloud,{allCategories:e.allCategories,categorySelecthandler:e.categorySelecthandler,selectedCategories:e.selectedCategories}),a.a.createElement("p",{className:"collection-publish__message"},"Choose up to ",e.maxSelectableCategories," categories that best describe your API."))}function PublishToTemplate(e){var t=e.templateName,n=e.templateSummary,o=e.templateDescription,i=e.teamInformation,r=e.userInformation,s=e.selectedPublisher,u=e.teamId,p=e.maxLengths,m=e.userId,d=[{label:"User (".concat(r.name,")"),value:"user"}],h="team"===s?i:r,f=Boolean(""===t||l.a.size(t)>p.listingName),g=Boolean(""===n||l.a.size(n)>p.listingSummary),y="Template name cannot be empty or cannot exceed ".concat(p.listingName," characters"),b="Template summary cannot be empty or cannot exceed\n      ".concat(p.listingSummary," characters"),v=a.a.createElement(PreviewPopover,{content:a.a.createElement(ListingPreview,{description:o,maxLengths:p,name:t,summary:n,type:"template"}),label:"Preview Listing"}),C="team"===s?{apiCount:h.apiCount,importCount:h.importCount}:{templateCount:h.templateCount,importCount:h.importCount};return u&&d.push({label:"Team (".concat(i.name,")"),value:"team"}),a.a.createElement("div",{className:"push-one-half--left"},a.a.createElement("label",{className:"collection-publish__label"},"Publish as"),a.a.createElement(c.SelectDropdown,{block:!0,options:d,searchable:!1,size:"md",value:s,onChange:e.onPublisherSelect}),a.a.createElement(EntityPreview,{description:h.description,entity:s,entityId:"user"===s?m:u,logo:h.logo||h.profile_pic_url,metrics:C,name:h.name}),a.a.createElement("label",{className:"collection-publish__label"},"Template Name",a.a.createElement("span",null,l.a.size(t),"/",p.listingName)),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.Field,{block:!0,className:"pm-select--block",message:f?y:null,size:"md",status:f?"error":null,value:t,onChange:function onChange(t){e.onNameChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"Enter a name for the template.",v)),a.a.createElement("label",{className:"collection-publish__label"},"Template Summary",a.a.createElement("span",null,l.a.size(n),"/",p.listingSummary)),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.Field,{block:!0,className:"pm-select--block",message:g?b:null,size:"md",status:g?"error":null,value:n,onChange:function onChange(t){e.onSummaryChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"Briefly state what the template does. The summary will appear on the Templates page.")),a.a.createElement("label",{className:"collection-publish__label"},"Template Description"),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.TextArea,{className:"pm-select--block",rows:"5",size:"md",value:o,onChange:function onChange(t){e.onDescriptionChange(t.target.value)}}),a.a.createElement("p",{className:"collection-publish__description"},"Enter a detailed description about how the template can be used. Description supports markdown.")),a.a.createElement("label",{className:"collection-publish__label"},"Categories"),a.a.createElement(CategoryCloud,{allCategories:e.allCategories,categorySelecthandler:e.categorySelecthandler,selectedCategories:e.selectedCategories}),a.a.createElement("p",{className:"collection-publish__message"},"Choose up to ",e.maxSelectableCategories," categories that best describe your Template."))}function PublishNetworkSection(e){return Object(o.useEffect)(function(){(new Image).src=H,(new Image).src=K,(new Image).src=Y},[]),a.a.createElement("div",{className:"collection-publish__publishing-type-content"},"network"===e.publishType&&a.a.createElement(PublishToNetworkForm,{allCategories:e.apiCategories,apiDescription:e.apiDescription,apiName:e.apiName,apiSummary:e.apiSummary,categorySelecthandler:e.onCategorySelect,maxLengths:e.maxLengths,maxSelectableCategories:e.maxSelectableCategories,selectedCategories:e.selectedCategories,teamInformation:e.teamInformation,onDescriptionChange:e.onApiDescriptionChange,onNameChange:e.onApiNameChange,onSummaryChange:e.onApiSummaryChange}),"template"===e.publishType&&a.a.createElement(PublishToTemplate,{allCategories:e.templateCategories,categorySelecthandler:e.onCategorySelect,maxLengths:e.maxLengths,maxSelectableCategories:e.maxSelectableCategories,selectedCategories:e.selectedCategories,selectedPublisher:e.selectedPublisher,teamId:e.teamId,teamInformation:e.teamInformation,templateDescription:e.templateDescription,templateName:e.templateName,templateSummary:e.templateSummary,userId:e.userId,userInformation:e.userInformation,onDescriptionChange:e.onTemplateDescriptionChange,onNameChange:e.onTemplateNameChange,onPublisherSelect:e.onPublisherSelect,onSummaryChange:e.onTemplateSummaryChange}))}function MultiCheckboxPopover(e){var t=e.selected||[];return a.a.createElement("div",{className:"pm-multi-checkbox__popover-container"},e.options.map(function(n){var o=t.indexOf(n.value)>-1;return a.a.createElement(c.Checkbox,{block:e.block,checked:o,className:"pm-multi-checkbox__list-item",disabled:o&&1===e.selected.length,key:n.value,label:n.label,size:"md",value:n.value,onClick:e.onCheckboxClick.bind(null,n.value)})}))}function MultiCheckboxDropdown(e){var t=a.a.createElement(MultiCheckboxPopover,{options:e.options,selected:e.selected,onCheckboxClick:e.onCheckboxClick});return a.a.createElement(c.Popover,{closeOnClickOutside:!0,hideCaret:!0,align:"bottom-left",className:"pm-multi-checkbox__popover",content:t},function(t){return a.a.createElement("div",{className:"pm-multi-checkbox",ref:t.triggerRef,onClick:t.onClick},a.a.createElement("span",{className:p()({"pm-multi-checkbox__select-placeholder":0===l.a.get(e,"selected.length"),"pm-multi-checkbox__select-text":l.a.get(e,"selected.length")>0})},function getPlaceholderText(e){var t=e.selected;if(!Array.isArray(t)||0===t.length)return"No Versions";if(Array.isArray(t)&&1===t.length){var n=e.options.find(function(e){return e&&e.value===t[0]});return l.a.get(n,"label")}return"Multiple versions (".concat(t.length,")")}(e)),a.a.createElement(c.Icon,{className:"pm-multi-checkbox__select-icon",name:t.open?"up":"down",size:"sm"}))})}function CustomDomainHelperText(e){var t=e.domain,n=e.currentlyPublishedDomainId,o=e.currentUserId,r=e.domains,s=l.a.get(t,"publishData.owner"),u=l.a.get(t,"publishData.collectionId"),p=l.a.get(t,"id"),m={unavailableDefault:a.a.createElement(c.Alert,{pmStyle:"error"},a.a.createElement(c.AlertBody,null,"Someone else on your team has already published a documentation with this domain. Ask them to unpublish their documentation before publishing yours.")),unavailableOwner:a.a.createElement(c.Alert,{pmStyle:"error"},a.a.createElement(c.AlertBody,null,a.a.createElement(i.c,{className:"pm-link",to:"/collections/".concat(s,"-").concat(u)},"Another published documentation")," is already using this custom domain. Please unpublish that before attempting to publish another documentation using this domain.")),unverified:a.a.createElement(c.Alert,{pmStyle:"warning"},a.a.createElement(c.AlertBody,null,"Once domain ownership is verified, your documentation will be accessible from this URL. ",a.a.createElement(i.c,{className:"pm-link",to:"/settings/domains/".concat(p)},"Verify Now")))};if(null!==p&&r&&r.length>1){if(null!==l.a.get(t,"upstream")&&p!==n)return"".concat(s)==="".concat(o)?m.unavailableOwner:m.unavailableDefault;if(!l.a.get(t,"verified"))return m.unverified}return null}function CustomDomainSelector(e){var t=this,n=e.customDomains,o=e.customDomainsOptionRenderer,i=e.handleCustomDomainChange,r=e.selectedCustomDomain,s=e.collection,u=e.userId,p=e.isFree,m=e.isForeverTrial,d=e.loading,h=e.error;return a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.Tooltip,{className:"collection-publish__tooltip",content:"This feature is only available for Postman Pro/Enterprise users.",show:p||m},function(e){return a.a.createElement("div",{ref:e.triggerRef,onMouseOut:e.onMouseOut,onMouseOver:e.onMouseOver},a.a.createElement(c.SelectDropdown,{block:!0,disabled:h||p||m,label:h?"Could not load custom domains":"No custom domain",labelKey:"fqdn",loading:d,optionRenderer:o.bind(t,s.customDomainId),options:n,searchable:!1,size:"md",value:l.a.get(r,"id"),valueKey:"id",valueRenderer:o.bind(t,s.customDomainId),onChange:i}))}),a.a.createElement("p",{className:"collection-publish__description"},"The published collection will be made available at the selected domain"),a.a.createElement(CustomDomainHelperText,{currentlyPublishedDomainId:s.customDomainId,currentUserId:u,domain:r,domains:n}))}function PublishViewPreview(e){var t=e.highlightColor,n=e.topBarColor,o=e.sidebarColor,i=e.teamLogoUrl,r={opacity:.05},s={opacity:.1},l={opacity:.1};return a.a.createElement("svg",{id:"documenter-preview",width:"100%",height:"130px"},a.a.createElement("rect",{x:"0",y:"0",width:"100%",height:"170",stroke:"#d8d8d8",style:{strokeWidth:1}}),a.a.createElement("rect",{x:"0",y:30,width:"100%",height:"130",fill:"#ffffff"}),a.a.createElement("rect",{x:"0",y:30,width:"30%",height:"130",fill:"#303030",style:{opacity:.05}}),a.a.createElement("rect",{x:"2%",y:"40",width:"26%",height:"10",rx:"3",ry:"3",fill:"#000000",style:r}),a.a.createElement("rect",{x:"2%",y:"55",width:"15%",height:"10",rx:"3",ry:"3",fill:"#000000",style:r}),a.a.createElement("rect",{x:"2%",y:"80",width:"26%",height:"10",rx:"3",ry:"3",fill:"#000000",style:r}),a.a.createElement("rect",{x:"2%",y:"95",width:"15%",height:"10",rx:"3",ry:"3",fill:"#000000",style:r}),a.a.createElement("rect",{x:"32%",y:"40",width:"41%",height:"10",rx:"3",ry:"3",fill:"#000000",style:r}),a.a.createElement("rect",{x:"32%",y:"55",width:"15%",height:"10",rx:"3",ry:"3",fill:"#000000",style:r}),a.a.createElement("rect",{x:"32%",y:"80",width:"15%",height:"10",rx:"3",ry:"3",fill:t}),a.a.createElement("rect",{x:"75%",y:30,width:"25%",height:"130",fill:o}),a.a.createElement("rect",{x:"75%",y:"40",width:"25%",height:"20",fill:"#ffffff",style:s}),a.a.createElement("rect",{x:"75%",y:"80",width:"25%",height:"10",fill:"#ffffff",style:s}),a.a.createElement("rect",{x:"0",y:"0",width:"100%",height:30,fill:n,stroke:"#000000",style:{strokeWidth:.5,strokeOpacity:.3}}),a.a.createElement("image",{xlinkHref:i,preserveAspectRatio:"xMinYMin",x:"10",y:"5",width:"57",height:"20"}),a.a.createElement("rect",{x:"83%",y:"7",width:"15%",height:"16",rx:"3",ry:"3",fill:"#000000",style:l}),a.a.createElement("rect",{x:"66%",y:"7",width:"15%",height:"16",rx:"3",ry:"3",fill:"#000000",style:l}))}function ColorPicker(e){var t=e.colorHex,n=e.onColorChange,o={background:t};return a.a.createElement("div",{className:"color-picker"},a.a.createElement(c.Field,{size:"md",value:t,onChange:n}),a.a.createElement("div",{className:"color-picker__preview",style:o}))}function CustomStyleSelector(e){var t=e.self,n=e.customColors,o=e.publishedCustomColors,i=void 0===o?{}:o,r=e.onColorChange,s=e.teamLogoUrl,l=e.onResetCustomColors;return a.a.createElement("div",{className:"collection-publish__custom-styles"},a.a.createElement(PublishViewPreview,{highlightColor:n.highlight,sidebarColor:n["right-sidebar"],teamLogoUrl:s,topBarColor:n["top-bar"]}),a.a.createElement("h5",{className:"pm-h5"},"Top Bar Color",i["top-bar"].toLowerCase()!==n["top-bar"].toLowerCase()?a.a.createElement("span",{className:"collection-publish__reset-styles",onClick:function onClick(){l(i,"top-bar")}},"Reset"):null),a.a.createElement(ColorPicker,{colorHex:n["top-bar"],onColorChange:r.bind(t,"top-bar")}),a.a.createElement("h5",{className:"pm-h5"},"Right Sidebar Color",i["right-sidebar"].toLowerCase()!==n["right-sidebar"].toLowerCase()?a.a.createElement("span",{className:"collection-publish__reset-styles",onClick:function onClick(){l(i,"right-sidebar")}},"Reset"):null),a.a.createElement(ColorPicker,{colorHex:n["right-sidebar"],onColorChange:r.bind(t,"right-sidebar")}),a.a.createElement("h5",{className:"pm-h5"},"Highlight Color",i.highlight.toLowerCase()!==n.highlight.toLowerCase()?a.a.createElement("span",{className:"collection-publish__reset-styles",onClick:function onClick(){l(i,"highlight")}},"Reset"):null),a.a.createElement(ColorPicker,{colorHex:n.highlight,onColorChange:r.bind(t,"highlight")}))}function SidebarNavigation(e){var t=e.heading,n=e.options,o=e.className;return a.a.createElement("div",{className:p()("pm-sidebar-navigation",o)},a.a.createElement("h2",{className:"pm-sidebar-navigation__heading"},t),a.a.createElement("ul",null,Array.isArray(n)&&n.map(function(t,n){var o=e.activeItem===l.a.get(t,"hash");return a.a.createElement("li",{className:p()({"active-item":o}),key:n},a.a.createElement("a",{className:p()("pm-sidebar-navigation__item",{"pm-sidebar-navigation__item--active":o}),href:t.hash},t.label))})))}function PublishForm_typeof(e){return(PublishForm_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function PublishForm_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function PublishForm_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?PublishForm_ownKeys(Object(n),!0).forEach(function(t){PublishForm_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):PublishForm_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function PublishForm_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function PublishForm_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function PublishForm_getPrototypeOf(e){return(PublishForm_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function PublishForm_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PublishForm_setPrototypeOf(e,t){return(PublishForm_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function PreviewDocumentation(e){var t=e.onClick,n=e.content;return a.a.createElement(c.Tooltip,{align:"right",content:n,size:"lg"},function(e){return a.a.createElement("div",{className:"pm-sidebar-navigation__preview-link",ref:e.triggerRef,onClick:t,onMouseOut:e.onMouseOut,onMouseOver:e.onMouseOver},a.a.createElement(c.Icon,{name:"preview",pmStyle:"primary",size:"sm"}),a.a.createElement("span",null,"Preview Documentation"))})}function PublishSwitcher(e){var t=e.publishType,n=e.onChange,o=e.isPublishedToNetwork,i=e.publishToNetwork,r=e.teamId,s=!r||o,l=o,u=i&&!s&&"network"===t,m=i&&!l&&"template"===t;function getPublishSwitcherTooltip(){return r?o&&"network"===t?"To change this, remove this collection from the API Network first.":o&&"template"===t?"To change this, remove this collection from Postman Templates first.":null:"You need to be a part of a team to publish to API Network."}return a.a.createElement("div",{className:"collection-publish-type-switcher pm-row push--right"},a.a.createElement(c.Tooltip,{className:"collection-publish__tooltip",content:getPublishSwitcherTooltip(),show:Boolean(i)&&s&&"network"!==t},function(e){return a.a.createElement("div",{className:"pm-col-md-6 collection-publish-type-switcher__item-wrapper",ref:e.triggerRef,onMouseOut:e.onMouseOut,onMouseOver:e.onMouseOver},a.a.createElement("div",{className:p()("collection-publish-type-switcher__item",{active:u,disabled:s}),onClick:function onClick(){n("network")}},a.a.createElement(c.Radio,{checked:u,className:"collection-publish-type-switcher__radio",disabled:s,key:"api-network",label:"Add to API Network",name:"api-network",size:"md",value:"api-network"}),a.a.createElement("p",{className:"collection-publish-type-switcher__description"},"Get featured on a curated list of API publishers and share your API with millions of Postman users.")))}),a.a.createElement(c.Tooltip,{className:"collection-publish__tooltip",content:getPublishSwitcherTooltip(),show:Boolean(i)&&l&&"template"!==t},function(e){return a.a.createElement("div",{className:"pm-col-md-6 collection-publish-type-switcher__item-wrapper",ref:e.triggerRef,onMouseOut:e.onMouseOut,onMouseOver:e.onMouseOver},a.a.createElement("div",{className:p()("collection-publish-type-switcher__item",{active:m,disabled:l}),onClick:function onClick(){n("template")}},a.a.createElement(c.Radio,{checked:m,className:"collection-publish-type-switcher__radio",disabled:l,key:"template",label:"Add to Postman Templates",name:"template",size:"md",value:"template"}),a.a.createElement("p",{className:"collection-publish-type-switcher__description"},"Share an interesting collection with the community. It could be a bunch of useful APIs or a way to automate a workflow.")))}))}var G=function(e){function PublishForm(e){var t;!function PublishForm_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,PublishForm);var n=e.collection,o=e.teamId?"network":"template",a=l.a.get(n,"name")||null,i=l.a.get(n,"description")||null,r=l.a.get(n,"publishType")||o;return(t=function PublishForm_possibleConstructorReturn(e,t){return!t||"object"!==PublishForm_typeof(t)&&"function"!=typeof t?PublishForm_assertThisInitialized(e):t}(this,PublishForm_getPrototypeOf(PublishForm).call(this,e))).defaultCustomColors={"top-bar":"#ffffff","right-sidebar":"#303030",highlight:"#ef5b25"},t.state={templateName:l.a.get(n,"templateName")||a,templateSummary:l.a.get(n,"templateSummary")||null,templateDescription:l.a.get(n,"templateDescription")||i,apiName:l.a.get(n,"apiName")||a,apiSummary:l.a.get(n,"apiSummary")||null,apiDescription:l.a.get(n,"apiDescription")||i,customColors:l.a.get(n,"customColor")||t.defaultCustomColors,selectedCustomDomain:l.a.find(e.customDomains,{id:n.customDomainId||null}),selectedEnvironmentTemplate:l.a.find(e.environmentTemplates,{value:n.environmentTemplateId}),publishToNetwork:l.a.get(n,"publishedToNetwork")||e.addToAPINetwork,publishType:r,selectedCategories:l.a.get(e,"selectedCategories")||[],selectedVersions:t.getSelectedVersion(e),selectedPublisher:l.a.get(n,"publishedBy.type","network"===r?"team":"user"),collectionVersions:l.a.get(t.props,"availableCollectionVersions",[]).map(function(e){return{value:e.id,label:e.apiVersion.name}}),previewHotReloadIsSupported:function getPostMessageSupport(e){var t=new Boolean("postMessage"in window);t.structuredclones=!1;try{window.postMessage({toString:function toString(){}},e)}catch(e){t.structuredclones=!0}return t.structuredclones}([t.props.documentationConfig.protocol,t.props.documentationConfig.host].join("://")),maxLengths:{listingName:70,listingSummary:140}},t.handleEnvironmentTemplateChange=t.handleEnvironmentTemplateChange.bind(PublishForm_assertThisInitialized(t)),t.handleCustomColorChange=t.handleCustomColorChange.bind(PublishForm_assertThisInitialized(t)),t.handleCustomDomainChange=t.handleCustomDomainChange.bind(PublishForm_assertThisInitialized(t)),t.customDomainsOptionRenderer=t.customDomainsOptionRenderer.bind(PublishForm_assertThisInitialized(t)),t.togglePublishToNetwork=t.togglePublishToNetwork.bind(PublishForm_assertThisInitialized(t)),t.handleCategorySelect=t.handleCategorySelect.bind(PublishForm_assertThisInitialized(t)),t.onPublish=t.onPublish.bind(PublishForm_assertThisInitialized(t)),t.resetCustomColors=t.resetCustomColors.bind(PublishForm_assertThisInitialized(t)),t.handleTemplateSummaryChange=t.handleTemplateSummaryChange.bind(PublishForm_assertThisInitialized(t)),t.handleDescriptionChange=t.handleDescriptionChange.bind(PublishForm_assertThisInitialized(t)),t.handleTemplateNameChange=t.handleTemplateNameChange.bind(PublishForm_assertThisInitialized(t)),t.handleApiDescriptionChange=t.handleApiDescriptionChange.bind(PublishForm_assertThisInitialized(t)),t.handleApiNameChange=t.handleApiNameChange.bind(PublishForm_assertThisInitialized(t)),t.handleApiSummaryChange=t.handleApiSummaryChange.bind(PublishForm_assertThisInitialized(t)),t.handleVersionCheckboxClick=t.handleVersionCheckboxClick.bind(PublishForm_assertThisInitialized(t)),t.getSelectedVersion=t.getSelectedVersion.bind(PublishForm_assertThisInitialized(t)),t.handlePreview=t.handlePreview.bind(PublishForm_assertThisInitialized(t)),t.previewWindow=null,t.handlePublisherSelect=t.handlePublisherSelect.bind(PublishForm_assertThisInitialized(t)),t.handlePublishTypeChange=t.handlePublishTypeChange.bind(PublishForm_assertThisInitialized(t)),t}return function PublishForm_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&PublishForm_setPrototypeOf(e,t)}(PublishForm,o["Component"]),function PublishForm_createClass(e,t,n){return t&&PublishForm_defineProperties(e.prototype,t),n&&PublishForm_defineProperties(e,n),e}(PublishForm,[{key:"componentDidMount",value:function componentDidMount(){!function PublishForm_scrollToHash(e){var t,n=e.hash;n&&"string"==typeof n&&(t=n.replace("#","")),t&&setTimeout(function(){var e=document.getElementById(t);e&&e.scrollIntoView()},0)}(this.props.location)}},{key:"getSelectedVersion",value:function getSelectedVersion(e){if(e.collection.published)return l.a.get(e,"collection.publishedVersions",[]).map(function(e){return e.versionTagId});var t=e.location.query.version,n=l.a.get(e,"availableCollectionVersions",[]).map(function(e){return e.id});return t&&n.indexOf(t)>-1?[t]:[n[0]]}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){l.a.get(this.props,"collection.publishedVersions")===l.a.get(e,"collection.publishedVersions")&&l.a.get(this.props,"availableCollectionVersions")===l.a.get(e,"availableCollectionVersions")||this.setState({collectionVersions:l.a.get(e,"availableCollectionVersions",[]).map(function(e){return{value:e.id,label:e.apiVersion.name}}),selectedVersions:this.getSelectedVersion(e)})}},{key:"handleEnvironmentTemplateChange",value:function handleEnvironmentTemplateChange(e){var t=this;this.setState({selectedEnvironmentTemplate:e},function(){t.handlePreview()})}},{key:"handleCustomDomainChange",value:function handleCustomDomainChange(e){this.setState({selectedCustomDomain:e})}},{key:"customDomainsOptionRenderer",value:function customDomainsOptionRenderer(e,t){var n=t.fqdn,o="".concat(t.fqdn," (unverified)"),a="".concat(t.fqdn," (unavailable)");return t.id?null!==t.upstream&&t.id!==e?a:t.verified?n:o:"No custom domain"}},{key:"handleCustomColorChange",value:function handleCustomColorChange(e,t,n){var o=this,a=n.target.value;d.t.isHexColor(a)&&this.setState({customColors:PublishForm_objectSpread({},e,PublishForm_defineProperty({},t,a))},function(){o.handlePreview()})}},{key:"togglePublishToNetwork",value:function togglePublishToNetwork(){this.setState(function(e){return{publishToNetwork:!e.publishToNetwork}})}},{key:"handleTemplateNameChange",value:function handleTemplateNameChange(e){this.setState({templateName:e})}},{key:"handleTemplateSummaryChange",value:function handleTemplateSummaryChange(e){this.setState({templateSummary:e})}},{key:"handleDescriptionChange",value:function handleDescriptionChange(e){this.setState({templateDescription:e})}},{key:"handleApiDescriptionChange",value:function handleApiDescriptionChange(e){this.setState({apiDescription:e})}},{key:"handleApiNameChange",value:function handleApiNameChange(e){this.setState({apiName:e})}},{key:"handleApiSummaryChange",value:function handleApiSummaryChange(e){this.setState({apiSummary:e})}},{key:"handleCategorySelect",value:function handleCategorySelect(e){this.setState(function(t){var n=t.selectedCategories;return l.a.find(n,function(t){return t.id===e.id})?n=n.filter(function(t){return e.id!==t.id}):n.length<3&&(n=n.concat(e)),{selectedCategories:n}})}},{key:"resetCustomColors",value:function resetCustomColors(e,t){var n=this;this.setState(function(n){return n.customColors[t]=e[t],n},function(){n.handlePreview()})}},{key:"onPublish",value:function onPublish(){var e=this.props,t=e.collection,n=e.documentationConfig,o=e.teamId,a=e.userId,i=this.state,r=i.customColors,s=i.selectedCustomDomain,l=i.selectedCategories,c=i.publishToNetwork,u=i.selectedEnvironmentTemplate,p=i.publishType,m=i.templateName,d=i.templateSummary,h=i.templateDescription,f=i.apiName,g=i.apiSummary,y=i.apiDescription,b=i.selectedVersions,v=i.selectedPublisher,C=t.owner;!c&&t.publishedToNetwork?window.pm.actions.showModal({type:"confirm",title:"template"===p?"Remove from Postman Templates":"Unpublish from the API Network",actionType:"error",confirmLabel:"Yes",body:"template"===p?"Are you sure you want to remove this collection from Postman Templates?\n        This collection would still be available at the public URL but not discoverable through Postman Templates.":"Are you sure you want to unpublish this collection from the API Network?\n           This collection would still be available at the public URL but not discoverable through the API Network",onConfirm:function onConfirm(){window.pm.actions.publishCollection({collection:t,customColors:r,domain:s,ownerId:C,template:u,publishToNetwork:c,publishType:p,selectedCategories:l,documentationConfig:n,templateName:m,templateSummary:d,templateDescription:h,apiName:f,apiSummary:g,apiDescription:y,collectionVersions:b}),window.pm.actions.hideModal()}}):window.pm.actions.publishCollection(PublishForm_objectSpread({collection:t,customColors:r,domain:s,ownerId:C,template:u,templateName:m,templateSummary:d,templateDescription:h,publishType:p,publishToNetwork:c,selectedCategories:l,documentationConfig:n,apiName:f,apiSummary:g,apiDescription:y,collectionVersions:b,userId:a},"team"===v?{teamId:o}:{}))}},{key:"handleVersionCheckboxClick",value:function handleVersionCheckboxClick(e){var t=this,n=this.state.selectedVersions,o=n.indexOf(e),a=o>-1?n.slice(0,o).concat(n.slice(o+1,n.length)):n.concat(e);this.setState({selectedVersions:a},function(){t.handlePreview()})}},{key:"getVersionInfoForPreview",value:function getVersionInfoForPreview(){var e,t=this,n=this.state.collectionVersions.map(function(e){return-1!==t.state.selectedVersions.indexOf(e.value)&&e}),o=[],a=[];return n.forEach(function(e){e&&(a.push(e.value),o.push(e.label))}),e=a[0]||"",o=o.join(","),{versionTag:a=a.join(","),apiName:o,selectedVersionTag:e}}},{key:"updatePreviewWindow",value:function updatePreviewWindow(e){var t=this.getVersionInfoForPreview(),n=t.versionTag,o=t.apiName,a={versionTag:n,version:t.selectedVersionTag,apiName:o,"top-bar":l.a.get(this.state,"customColors.top-bar","").slice(1),"right-sidebar":l.a.get(this.state,"customColors.right-sidebar","").slice(1),highlight:l.a.get(this.state,"customColors.highlight","").slice(1),environment:l.a.get(this.state,"selectedEnvironmentTemplate.value")};!function transmitMessage(e,t,n){return e.postMessage(JSON.stringify(n),t)}(this.previewWindow,e,a)}},{key:"handlePreview",value:function handlePreview(e){var t=this,n=this.props.documentationConfig,o=[n.protocol,n.host].join("://"),a=this.state.previewHotReloadIsSupported;if(this.previewWindow&&!this.previewWindow.closed&&a)this.updatePreviewWindow(o);else if("userRequestedPreview"===e){var i=l.a.get(this.props,"collection.owner")+"-"+l.a.get(this.props,"collection.id"),r=l.a.get(this.state,"selectedEnvironmentTemplate.value"),s=Object.keys(this.state.customColors).map(function(e){return Q.a.stringify(PublishForm_defineProperty({},e,t.state.customColors[e].slice(1)))}).join("&"),c=this.getVersionInfoForPreview(),u={environment:r,versionTag:c.versionTag,apiName:c.apiName,version:c.selectedVersionTag},p={};Object.keys(u).forEach(function(e){u[e]&&(p[e]=u[e])});var m=[Q.a.stringify(p),s].join("&"),h=o.concat("/preview/".concat(i,"?").concat(m));d.a.recordEvent("documentationPublicPreview",{entityId:"".concat(l.a.get(this.props,"collection.owner"),"-").concat(l.a.get(this.props,"collection.id"))}),this.previewWindow=window.open(h,"Preview","height=".concat(window.innerHeight,",width=").concat(window.innerWidth))}}},{key:"handlePublisherSelect",value:function handlePublisherSelect(e){this.setState({selectedPublisher:l.a.get(e,"value")})}},{key:"handlePublishTypeChange",value:function handlePublishTypeChange(e){this.state.publishToNetwork?this.state.publishType!==e&&this.setState({publishType:e,selectedCategories:[],selectedPublisher:"network"===e?"team":"user"}):this.setState({publishToNetwork:!0,publishType:e})}},{key:"render",value:function render(){var e=this,t=this.state,n=t.selectedCustomDomain,i=t.customColors,r=t.publishType,s=t.publishToNetwork,u=t.apiName,p=t.apiDescription,h=t.apiSummary,f=t.templateName,g=t.templateDescription,y=t.templateSummary,b=t.selectedVersions,v=t.previewHotReloadIsSupported,C=this.props,_=C.collection,w=C.environmentTemplates,E=C.publishing,O=C.customDomains,P=C.exploreConfig,S=C.teamInformation,k=C.userInformation,I=C.apiCategories,N=C.templateCategories,T=C.location,D=C.teamId,j=this.defaultCustomColors,M=v?"Opens a live preview of the documentation in another window, which reloads on any change.":"Get a preview of your documentation.",x=a.a.createElement(m.t,{className:"pm-link",extUrl:"".concat(P.protocol,"://").concat(P.host),target:"_blank"},P.host),L=l.a.get(_,"id"),R=l.a.get(_,"owner"),A=!0;return l.a.isEmpty(b)&&(A=!1),n&&null!==n.id&&null!==l.a.get(n,"upstream")&&L!==l.a.get(n,"publishData.collectionId")&&(A=!1),s&&"network"===r&&(A=Boolean(u&&p&&h&&l.a.size(u)<this.state.maxLengths.listingName&&l.a.size(h)<this.state.maxLengths.listingSummary)),s&&"template"===r&&(A=Boolean(f&&g&&y&&l.a.size(f)<this.state.maxLengths.listingName&&l.a.size(y)<this.state.maxLengths.listingSummary)),a.a.createElement(o.Fragment,null,a.a.createElement("div",{className:"collection-publish-sidebar"},a.a.createElement("h4",{className:"pm-h4 publish-collection-name",title:_.name},_.name),a.a.createElement(SidebarNavigation,{activeItem:T.hash||"#content",heading:"Publish collection",location:T,options:[{label:"Content",hash:"#content"},{label:"URL",hash:"#url"},{label:"Styling",hash:"#styling"},{label:"Collection Discovery",hash:"#collection-discovery"}]}),a.a.createElement("div",{className:"pm-sidebar-navigation__documentation-preview-button"},a.a.createElement(PreviewDocumentation,{content:M,onClick:function onClick(){e.handlePreview("userRequestedPreview")}}))),a.a.createElement("div",{className:"collection-publish"},a.a.createElement("div",{className:"push-double--top",id:"content"},a.a.createElement("h4",{className:"pm-h4"},"Content"),this.state.collectionVersions.length>0&&a.a.createElement(o.Fragment,null,a.a.createElement("label",{className:"collection-publish__label"},"Collection version"),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(MultiCheckboxDropdown,{block:!0,options:this.state.collectionVersions,selected:this.state.selectedVersions,onCheckboxClick:this.handleVersionCheckboxClick}),a.a.createElement("p",{className:"collection-publish__description"},"Select one or more collection states to publish.  ",a.a.createElement("a",{className:"pm-link",href:"https://go.pstmn.io/public-documentation-versioning",rel:"noopener noreferrer",target:"_blank"},"Learn more"),"  about version tags"))),a.a.createElement("label",{className:"collection-publish__label"},"Environment"),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.SelectDropdown,{block:!0,label:"No Environment",options:w,searchable:!1,size:"md",value:l.a.get(this.state.selectedEnvironmentTemplate,"value"),onChange:this.handleEnvironmentTemplateChange}),a.a.createElement("p",{className:"collection-publish__description"},"This will publish your environment variables and values, making your collection easier to consume. Make sure there's no sensitive information in your variable values."))),a.a.createElement("div",{className:"push-double--top",id:"url"},a.a.createElement("h4",{className:"pm-h4"},"URL"),a.a.createElement("label",{className:"collection-publish__label"},"Custom domain"),a.a.createElement(CustomDomainSelector,{collection:_,customDomains:O,customDomainsOptionRenderer:this.customDomainsOptionRenderer,error:this.props.errorLoadingDomain,handleCustomDomainChange:this.handleCustomDomainChange,isForeverTrial:this.props.isForeverTrial,isFree:this.props.isFree,loading:this.props.domainLoading,selectedCustomDomain:this.state.selectedCustomDomain})),a.a.createElement("div",{className:"push-double--top",id:"styling"},a.a.createElement("h4",{className:"pm-h4"},"Styling"),a.a.createElement(CustomStyleSelector,{customColors:i,publishedCustomColors:j,self:this,teamLogoUrl:S.logo,onColorChange:this.handleCustomColorChange.bind(this,i),onResetCustomColors:this.resetCustomColors})),a.a.createElement("div",{className:"collection-publish__two-col push-double--bottom push-double--top",id:"collection-discovery"},a.a.createElement("h4",{className:"pm-h4"},"Collection discovery"),a.a.createElement("span",null,"Expand your outreach by letting users discover this collection in ",x),a.a.createElement(c.Switch,{checked:s,className:"collection-publish__switch",label:s?"Enabled":"Disabled",size:"sm",onChange:this.togglePublishToNetwork})),a.a.createElement(PublishSwitcher,{isPublishedToNetwork:_.publishedToNetwork,publishToNetwork:this.state.publishToNetwork,publishType:r,teamId:D,onChange:this.handlePublishTypeChange}),this.state.publishToNetwork&&a.a.createElement(PublishNetworkSection,{apiCategories:I,apiDescription:p,apiName:u,apiSummary:h,isPublishedToNetwork:_.publishedToNetwork,maxLengths:this.state.maxLengths,maxSelectableCategories:3,publishToNetwork:s,publishType:this.state.publishType,selectedCategories:this.state.selectedCategories,selectedPublisher:this.state.selectedPublisher,teamId:D,teamInformation:S,templateCategories:N,templateDescription:g,templateName:f,templateSummary:y,userId:this.props.userId,userInformation:k,onApiDescriptionChange:this.handleApiDescriptionChange,onApiNameChange:this.handleApiNameChange,onApiSummaryChange:this.handleApiSummaryChange,onCategorySelect:this.handleCategorySelect,onPublisherSelect:this.handlePublisherSelect,onTemplateDescriptionChange:this.handleDescriptionChange,onTemplateNameChange:this.handleTemplateNameChange,onTemplateSummaryChange:this.handleTemplateSummaryChange}),a.a.createElement("hr",{className:"push-double--top"}),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement(c.FormActions,{cancelButtonClass:"pm-modal-transfer__cancel",cancelText:"Cancel",className:"collection-publish__actions",confirmButtonClass:"pm-modal-transfer__confirm",confirmDisabled:!A,confirming:E,confirmText:_.published?"Save and republish collection":"Publish Collection",size:"md",onCancel:function onCancel(){_.published?e.props.onEdit(!1,!1):d.s.goToRoute("/collections/".concat(R,"-").concat(_.id))},onConfirm:this.onPublish}),a.a.createElement("p",{className:"collection-publish__description"},"Completing this step will make your collection available at a public URL."))))}}]),PublishForm}();function AddCollectionDiscovery(e){var t=a.a.createElement(c.Button,{className:"collection-published__add-network",pmStyle:"primary",size:"md",onClick:function onClick(){e.onEdit(!0,!0)}},"Allow collection discovery");return a.a.createElement(m.v,{action:t,body:"Add this collection to the API Network or Postman Templates to share it with millions of developers who use Postman",imageSrc:"".concat("https://static.postman.co/img","/team.svg")})}function PublishedActions(e){return a.a.createElement("div",{className:"collection-published__actions pm-col-md-6"},a.a.createElement(c.Button,{className:"edit-btn",pmStyle:"secondary",size:"md",onClick:function handleEdit(){d.a.recordEvent("documentationEditPublished",{entityId:"".concat(e.ownerId,"-").concat(e.collectionId)}),e.onEdit(!0,e.addToAPINetwork)}},"Edit settings"),a.a.createElement(c.Button,{block:!0,className:"unpublish-btn",disabled:e.unpublishing,pmStyle:"error",size:"md",onClick:function onClick(){e.onUnpublish()}},e.unpublishing?a.a.createElement(c.Loader,null):"Unpublish"))}function AddToAPINetwork(e){return a.a.createElement("div",{className:"collection-published__bordered collection-published__bordered--empty-state"},a.a.createElement(AddCollectionDiscovery,{onEdit:e.onEdit}))}function PublishedBy(e){var t=e.id,n=e.logo,o=e.publicProfile,r=e.name,s="user"===e.type,l=a.a.createElement(i.c,{className:"pm-link collection-publish-entity-preview__link",target:"_blank",title:o,to:o},o),u=a.a.createElement(i.c,{className:"pm-link",to:s?"/settings/me/public":"/settings/team/public"},s?"User Settings":"Team Settings"),m=s?a.a.createElement(c.UserIcon,{className:p()("collection-published-entity-preview__image--user","collection-published-entity-preview__image"),size:"sm",url:n,userId:t}):a.a.createElement("img",{className:"collection-published-entity-preview__image",src:n});return a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement("div",{className:"collection-published-entity-preview"},m&&m,a.a.createElement("h2",{className:"collection-published-entity-preview__name"},r)),a.a.createElement("p",{className:"collection-publish__description"},"Your public profile is at ",a.a.createElement("br",null),l,"Customize the profile from ",u))}function AddedToAPINetwork(e){var t=e.networkName,n=e.networkSummary,r=e.selectedCategories,s=e.apiNetworkStatus,l=e.publishType,u=e.publishedBy,p=e.listingPublicURL,m=r.map(function(e,t){return a.a.createElement(c.Badge,{className:"collection-published__category",key:t},e.name)}),d=p&&a.a.createElement(i.c,{className:"pm-link",target:"_blank",to:e.listingPublicURL},e.listingPublicURL),h="template"===l?"Postman Templates":"API Network";return a.a.createElement(o.Fragment,null,a.a.createElement("h4",{className:"pm-h4"},h),a.a.createElement("div",{className:"collection-publish__two-col"},a.a.createElement("div",{className:"collection-published__bordered"},a.a.createElement("div",{className:"collection-published__network-info"},a.a.createElement(c.Icon,{name:"collection",size:"sm"}),a.a.createElement("span",{title:t},t)),a.a.createElement("p",{className:"collection-published__network-summary"},n),a.a.createElement("div",{className:"collection-published__category-listing"},m)),a.a.createElement("p",{className:"collection-published__edit-info"},"To make changes to the listing, edit your published collection and republish it."),a.a.createElement("p",{className:"collection-published__publish-status"},"unverified"===s&&a.a.createElement(o.Fragment,null,a.a.createElement(c.Badge,{className:"publish-status--in-review"},"In Review"),a.a.createElement("span",{className:"publish-status-description"},"Your listing is being reviewed")),("published"===s||"updated"===s)&&a.a.createElement(o.Fragment,null,a.a.createElement(c.Badge,{className:"publish-status--published"},"Published"),d&&a.a.createElement("span",{className:"publish-status-description"},"Your listing is published at ",a.a.createElement("br",null),d)),"rejected"===s&&a.a.createElement(o.Fragment,null,a.a.createElement(c.Badge,{className:"publish-status--not-published"},"Not Published"),a.a.createElement("span",{className:"publish-status-description"},"Your listing could not be published")),"archived"===s&&a.a.createElement(o.Fragment,null,a.a.createElement(c.Badge,{className:"publish-status--deleted"},"Deleted")))),u.isPublic&&a.a.createElement(o.Fragment,null,a.a.createElement("h4",{className:"pm-h4"},"Publisher profile"),a.a.createElement(PublishedBy,{id:u.id,logo:u.profileURL,name:u.publicName,publicProfile:u.publicURL,type:u.type})))}function PublishedToNetworkSection(e){var t=e.collection,n=e.selectedCategories,o=e.publishedToNetwork,i=e.publishType,r=e.apiNetworkStatus,s=e.loading,l="template"===i?t.templateName:t.apiName,u="template"===i?t.templateSummary:t.apiSummary,p=t.publishedBy;return a.a.createElement("div",{className:"collection-published__segment"},a.a.createElement("h2",{className:"pm-h2"},"Collection discovery",o&&a.a.createElement("div",{className:"pull-right"},a.a.createElement(c.Button,{className:"push-half--left",icon:"edit",pmStyle:"secondary",onClick:function onClick(){e.onEdit(!0,!0)}}),a.a.createElement(c.Button,{className:"push-half--left",disabled:e.loading,icon:"delete",pmStyle:"secondary",onClick:function onClick(){e.onAPINetworkUnpublish(i)}}))),!o&&a.a.createElement(AddToAPINetwork,{isFree:e.isFree,loading:s,onEdit:e.onEdit}),o&&a.a.createElement(AddedToAPINetwork,{apiNetworkStatus:r,listingPublicURL:e.listingPublicURL,loading:s,networkName:l,networkSummary:u,publishedBy:p,publishType:i,selectedCategories:n,onEdit:e.onEdit}))}function PublishedToDocSection(e){var t=l.a.get(e,"collection.publishedVersions",[]).map(function(t){var n=e.availableCollectionVersions&&e.availableCollectionVersions.find(function(e){return e.id===t.versionTagId});return l.a.get(n,"apiVersion.name")});return a.a.createElement("div",null,a.a.createElement("div",{className:"collection-published__segment"},a.a.createElement("h3",{className:"pm-h3"},"Content"),a.a.createElement("p",{className:"collection-published__name"},e.collection.name," ",a.a.createElement("span",{className:"collection-published__name__version"},"Versions: ",t.join(", "))," ",a.a.createElement("br",null),a.a.createElement("br",null),e.template&&e.template.label||"No Environment"),a.a.createElement("h3",{className:"pm-h3"},"URL"),a.a.createElement("div",{className:"collection-published__public-url"},a.a.createElement("p",{"data-url":e.publishedUrl,onClick:function handleClick(t){d.a.recordEvent("documentationPublicViewAfterPublished",{entityId:"".concat(l.a.get(e,"collection.owner"),"-").concat(l.a.get(e,"collection.id"))}),d.s.goToNewWindow(t.currentTarget.dataset.url)}},e.publishedUrl)),a.a.createElement("h3",{className:"pm-h3"},"Styling"),a.a.createElement(PublishViewPreview,{highlightColor:e.customColors.highlight,sidebarColor:e.customColors["right-sidebar"],teamLogoUrl:e.teamLogoUrl,topBarColor:e.customColors["top-bar"]})))}function PublishedForm(e){var t=e.addToAPINetwork,n=e.collection,o=e.template,i=e.unpublishing,r=e.publishedUrl,s=e.publishedToNetwork,u=e.selectedCategories,p=e.publishType,m=e.availableCollectionVersions,d=l.a.get(n,"customColor")||{"top-bar":"#ffffff","right-sidebar":"#303030",highlight:"#ef5b25"},h=l.a.get(e,"teamInformation.logo");return a.a.createElement("div",{className:"collection-published"},a.a.createElement("div",{className:"collection-published__header pm-row"},a.a.createElement("h1",{className:"pm-h1 pm-col-md-6"},"Collection is published",a.a.createElement(c.Icon,{className:"collection-published__success-icon",name:"success",pmStyle:"white",size:"sm"})),a.a.createElement(PublishedActions,{addToAPINetwork:t,collectionId:n.id,ownerId:n.owner,unpublishing:e.unpublishing,onEdit:e.onEdit,onUnpublish:e.onUnpublish})),a.a.createElement("hr",{className:"push-half--top"}),a.a.createElement(PublishedToDocSection,{availableCollectionVersions:m,collection:n,customColors:d,ownerId:n.owner,publishedUrl:r,teamLogoUrl:h,template:o,unpublishing:i,onEdit:e.onEdit,onUnpublish:e.onUnpublish}),a.a.createElement(PublishedToNetworkSection,{apiNetworkStatus:e.apiNetworkStatus,collection:n,isFree:e.isFree,listingPublicURL:e.listingPublicURL,loading:e.publishingToNetwork||i,publishedToNetwork:s,publishType:p,selectedCategories:u,onAPINetworkUnpublish:e.onAPINetworkUnpublish,onEdit:e.onEdit}))}function CollectionPublish_typeof(e){return(CollectionPublish_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CollectionPublish_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function CollectionPublish_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CollectionPublish_extends(){return(CollectionPublish_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function CollectionPublish_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CollectionPublish_getPrototypeOf(e){return(CollectionPublish_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CollectionPublish_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CollectionPublish_setPrototypeOf(e,t){return(CollectionPublish_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var $=function(e){function CollectionPublish(e){var t;return function CollectionPublish_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionPublish),(t=function CollectionPublish_possibleConstructorReturn(e,t){return!t||"object"!==CollectionPublish_typeof(t)&&"function"!=typeof t?CollectionPublish_assertThisInitialized(e):t}(this,CollectionPublish_getPrototypeOf(CollectionPublish).call(this,e))).onUnpublish=t.onUnpublish.bind(CollectionPublish_assertThisInitialized(t)),t.onAPINetworkUnpublish=t.onAPINetworkUnpublish.bind(CollectionPublish_assertThisInitialized(t)),t}return function CollectionPublish_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CollectionPublish_setPrototypeOf(e,t)}(CollectionPublish,o["Component"]),function CollectionPublish_createClass(e,t,n){return t&&CollectionPublish_defineProperties(e.prototype,t),n&&CollectionPublish_defineProperties(e,n),e}(CollectionPublish,[{key:"componentDidMount",value:function componentDidMount(){var e=this.props,t=e.collection,n=e.userId,o=e.teamId;document.title=t&&t.published?"Edit Published Collection":"Publish Collection",window.pm.actions.getCollectionVersions({collectionId:this.props.params.id}),window.pm.actions.getCollectionMeta({collectionId:this.props.params.id}),window.pm.actions.getApiNetworkCategories(),window.pm.actions.getPublicCollectionInfo({collectionUid:this.props.params.id}),window.pm.actions.getWorkspaceEnvironments({workspaceId:this.props.activeWorkspace}),window.pm.actions.getTemplateCategories(),window.pm.actions.getUserPublicProfile({userId:n}),o&&window.pm.actions.getTeamPublicProfile({teamId:o}),t.publishedToNetwork||window.pm.actions.getCollectionQuality({collectionId:this.props.params.id}),this.props.isFree||window.pm.actions.getDomains()}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){var t=e.collection,n=l.a.get(this.props,"collection.published");t&&t.published!==n&&(document.title=t.published?"Edit Published Collection":"Publish Collection")}},{key:"onAPINetworkUnpublish",value:function onAPINetworkUnpublish(e){var t=this.props.collection,n="network"===e?"Are you sure you want to remove this collection from the API Network?\n      This collection would still be available through the published documentation but not\n      discoverable through the API Network":"Are you sure you want to remove this collection from Postman Templates? This collection\n      would still be available through the published documentation but not discoverable through Postman Templates.",o="network"===e?"Unpublish collection from the API Network":"Remove from Postman Templates";window.pm.actions.showModal({type:"confirm",title:o,actionType:"error",confirmLabel:"network"===e?"Yes":"Remove from Postman Templates",body:n,onConfirm:function onConfirm(){"network"===e?window.pm.actions.unpublishFromNetwork({collection:t}):window.pm.actions.removeTemplate({collection:t}),window.pm.actions.hideModal()}})}},{key:"onUnpublish",value:function onUnpublish(){var e=this.props,t=e.collection,n=e.customDomains,o=e.documentationConfig,a=t.owner,i=t.publishedToNetwork,r=t.publishType,s="".concat("network"===r?" and will be removed from the API Network.":" and corresponding template will be removed."),c=l.a.find(n,function(e){return e.id===t.customDomainId}),u=Object(h.f)(t,c,o);window.pm.actions.showModal({type:"confirm",title:"Unpublish collection",actionType:"error",confirmLabel:"Unpublish",body:"Are you sure you want to unpublish this collection? This collection would\n      no longer be available at the public URL".concat(i?"".concat(s):"."),onConfirm:function onConfirm(){window.pm.actions.unpublishCollection({collection:t,ownerId:a,publishType:r,url:u}),window.pm.actions.hideModal()}})}},{key:"onEdit",value:function onEdit(e,t){window.pm.actions.editPublishedCollection({editing:e,addToAPINetwork:t})}},{key:"render",value:function render(){var e=this.props,t=e.collection,n=e.customDomains,o=e.documentationConfig,i=e.userInformation,r=e.teamInformation,s=t.publishedToNetwork,u=t.publishType,p=l.a.find(n,function(e){return e.id===t.customDomainId}),d=l.a.find(this.props.environmentTemplates,{value:t.environmentTemplateId}),f=Object(h.f)(t,p,o),g={name:this.props.userPublicName||i.name,logo:this.props.userPublicProfilePicture||i.logo,description:this.props.userPublicDescription,templateCount:this.props.userTemplateCount,importCount:this.props.userImportCount},y={name:this.props.teamPublicName||r.name,logo:this.props.teamPublicProfilePicture||r.logo,description:this.props.teamPublicDescription,apiCount:this.props.teamAPICount,importCount:this.props.teamImportCount};return this.props.loading?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):a.a.createElement(m.r,{name:t.published&&!this.props.editing?"published":"publish"},(!t.published||this.props.editing)&&a.a.createElement(G,CollectionPublish_extends({},l.a.pick(this.props,["apiCategories","templateCategories","collection","customDomains","exploreConfig","environmentTemplates","addToAPINetwork","selectedCategories","documentationConfig","isFree","isForeverTrial","activeWorkspace","availableCollectionVersions","location","domainLoading","errorLoadingDomain","teamId","userId"]),{publishedToNetwork:s,publishing:this.props.publishingCollection||this.props.publishingToNetwork,publishType:u,teamInformation:y,userInformation:g,onEdit:this.onEdit})),t.published&&!this.props.editing&&a.a.createElement(PublishedForm,{addToAPINetwork:this.props.addToAPINetwork,apiNetworkStatus:this.props.apiNetworkStatus,availableCollectionVersions:this.props.availableCollectionVersions,collection:this.props.collection,isFree:this.props.isFree,listingPublicURL:this.props.listingPublicURL,publishedToNetwork:s,publishedUrl:f,publishingToNetwork:this.props.publishingToNetwork,publishType:u,selectedCategories:this.props.selectedCategories,teamInformation:r,template:d,unpublishing:this.props.publishingCollection,userInformation:g,onAPINetworkUnpublish:this.onAPINetworkUnpublish,onEdit:this.onEdit,onUnpublish:this.onUnpublish}))}}]),CollectionPublish}();var Z=Object(r.b)(function CollectionPublish_mapStateToProps(e,t){var n=e.shared.workspaces||{},o=e.workspace.environments||{},a=e.settings,i=n.active,r=l.a.get(n,["byId",i]),s=l.a.get(r,"dependencies.environments")||[],c=Object(h.b)(t.params.id),u=l.a.get(e,"collection.meta")||{},p=l.a.get(e,"shared.userData.identity")||{},m=l.a.get(e,"collection.versions")||{},f=s.reduce(function(e,t){var n=o.byId[t];return n&&e.push({value:n.id,label:n.name,ownerId:n.owner}),e},[]),g=Array.isArray(u.allApiCategories)?u.allApiCategories.filter(function(e){return e.approved}):[],y=Array.isArray(u.templateCategories)?u.templateCategories.filter(function(e){return e.approved}):[];return{activeWorkspace:i,collection:function CollectionPublish_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CollectionPublish_ownKeys(Object(n),!0).forEach(function(t){CollectionPublish_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CollectionPublish_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({id:c,owner:l.a.get(u,"owner.id")},l.a.pick(u,["name","description","templateName","templateDescription","templateSummary","published","environmentTemplateId","apiName","apiDescription","apiSummary","customDomainId","customColor","publishedId","publishedToNetwork","publishType","apiNetworkId","templateId","publishedVersions","publishedBy"])),loadingStatus:u.loading||u.loadingPublicInfo||o.loading||l.a.get(e,"settings.domains.loading"),publishingCollection:u.publishing||u.unpublishing,publishingToNetwork:u.publishingToNetwork||u.unpublishingFromNetwork,customDomains:[{fqdn:null,id:null}].concat(Object.values(l.a.get(e,"settings.domains.byId")||{})),documentationConfig:l.a.get(e,"shared.userData.config.postmanServices.doc"),exploreConfig:l.a.get(e,"shared.userData.config.postmanServices.apiNetwork",{}),environmentTemplates:[{value:"",label:"No Environment",ownerId:""}].concat(f),loading:u.loading||u.loadingPublicInfo||o.loading||u.loadingCategories||u.loadingTemplateCategories||m.loading||u.loadingCollectionQuality,domainLoading:l.a.get(e,"settings.domains.loading"),errorLoadingDomain:l.a.get(e,"settings.domains.error"),teamId:p.team,availableCollectionVersions:m.data,userId:p.user,editing:u.editing,addToAPINetwork:u.addToAPINetwork,apiNetworkStatus:u.apiNetworkStatus,apiNetworkId:u.apiNetworkId,templateId:u.templateId,teamInformation:l.a.get(e,"shared.team.information"),userInformation:l.a.get(e,"shared.userData.user"),isFree:d.o.isFree(l.a.get(e,"shared.userData.account.planName")),isForeverTrial:d.o.isForeverTrial(l.a.get(e,"shared.userData.account.planName")),selectedCategories:u.selectedCategories,apiCategories:g,templateCategories:y,listingPublicURL:u.listingPublicURL,userPublicName:l.a.get(a,"userPublicProfile.publicName"),userPublicDescription:l.a.get(a,"userPublicProfile.description"),userPublicProfilePicture:l.a.get(a,"userPublicProfile.publicProfilePicture"),userImportCount:l.a.get(a,"userPublicProfile.importCount"),userTemplateCount:l.a.get(a,"userPublicProfile.templateCount"),teamPublicName:l.a.get(a,"team.publicName"),teamPublicDescription:l.a.get(a,"team.publicDescription"),teamPublicProfilePicture:l.a.get(a,"team.publicProfilePicture"),teamImportCount:l.a.get(a,"team.importCount"),teamAPICount:l.a.get(a,"team.apiCount")}})($),J=n("NTYG");function MockDocs(e){return a.a.createElement("a",{className:"pm-link",href:"https://www.getpostman.com/docs/postman/mock_servers/setting_up_mock",rel:"noopener noreferrer",target:"_blank"},e.children)}function MockDescription(){return a.a.createElement("div",null,"Create a ",a.a.createElement(MockDocs,null,"mock server")," to simulate each endpoint and its corresponding environment in a Postman Collection, before sending the actual request.")}function CreateMock(e){var t=e.workspace,n=void 0===t?{}:t,o=e.collection;return a.a.createElement(c.Button,{size:"md",onClick:function onClick(){d.a.recordEvent("mockInitiateCreate",{label:"collection_mocks_listing_empty_state"}),e.isMember?d.s.goToRoute("/mocks/create?collection=".concat(o,"&origin=collection_mocks_listing_empty_state")):window.pm.actions.showModal({children:a.a.createElement(J.a,{successPath:"/mocks/create?collection=".concat(o),workspace:n})})}},"Create a mock server on this collection")}function NoMocks(e){return a.a.createElement(m.v,{action:a.a.createElement(CreateMock,e),body:a.a.createElement(MockDescription,null),className:"collection-mocks__empty",imageSrc:"".concat("https://static.postman.co/img","/mock.svg"),title:"There are no mocks for this collection in this workspace"})}var X=n("OQZp");function CollectionMocks_typeof(e){return(CollectionMocks_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CollectionMocks_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function CollectionMocks_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CollectionMocks_extends(){return(CollectionMocks_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e}).apply(this,arguments)}function CollectionMocks_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CollectionMocks_possibleConstructorReturn(e,t){return!t||"object"!==CollectionMocks_typeof(t)&&"function"!=typeof t?function CollectionMocks_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function CollectionMocks_getPrototypeOf(e){return(CollectionMocks_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CollectionMocks_setPrototypeOf(e,t){return(CollectionMocks_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var ee=function(e){function CollectionMocks(){return function CollectionMocks_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionMocks),CollectionMocks_possibleConstructorReturn(this,CollectionMocks_getPrototypeOf(CollectionMocks).apply(this,arguments))}return function CollectionMocks_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CollectionMocks_setPrototypeOf(e,t)}(CollectionMocks,o["Component"]),function CollectionMocks_createClass(e,t,n){return t&&CollectionMocks_defineProperties(e.prototype,t),n&&CollectionMocks_defineProperties(e,n),e}(CollectionMocks,[{key:"componentDidMount",value:function componentDidMount(){window.pm.actions.getMocks({collectionId:this.props.params.id,userId:this.props.userId,teamId:this.props.teamId,workspaceId:this.props.workspaceId,populate:!0})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){e.collectionName!==this.props.collectionName&&(document.title=this.props.collectionName?this.props.collectionName+" - Mocks":"Collection - Mocks")}},{key:"render",value:function render(){var e=this.props.mocks;return this.props.loading?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):this.props.error?a.a.createElement(m.A,{description:this.props.error.message||"There was an error while fetching mocks for\n        this collection. Please try again after some time.",statusCode:this.props.error.statusCode}):Array.isArray(e)&&e.length?a.a.createElement(m.r,{className:"collection-mocks"},a.a.createElement(m.E,{className:"collection-mocks__table",columns:["name","versionTag","environment","title","actions"],deleting:this.props.deleting,mocks:e,origin:"collection_mocks_listing",teamMembers:this.props.teamMembers,userId:this.props.userId})):a.a.createElement(NoMocks,CollectionMocks_extends({},l.a.pick(this.props,["workspace","isMember"]),{collection:this.props.params.id}))}}]),CollectionMocks}();var te=Object(r.b)(function CollectionMocks_mapStateToProps(e,t){var n=l.a.get(e,"shared.mocks")||{},o=l.a.get(e,"shared.workspaces.active"),a=e.shared.workspaces||{},i=l.a.get(a,["byId",o])||{},r=l.a.get(e,["shared","workspaces","byId",o,"dependencies","mocks"])||[],s=l.a.get(e,"shared.userData.identity.user");return{workspaceId:o,workspace:i,loading:n.loading||l.a.get(e,"collection.meta.loading"),deleting:n.deleting,error:n.error,mocks:n.ids.reduce(function(o,a){return r.indexOf(a)>-1&&o.push(function CollectionMocks_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CollectionMocks_ownKeys(Object(n),!0).forEach(function(t){CollectionMocks_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CollectionMocks_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},n.byId[a],{permissions:l.a.get(e,["shared","permissions","collection",t.params.id]),collectionOwner:l.a.get(e,"collection.meta.owner.id"),environmentName:l.a.get(n,["byId",a,"environment","name"]),environmentId:l.a.get(n,["byId",a,"environment","id"])})),o},[]),permissions:l.a.get(e,"collection.meta.permissions"),ownerId:l.a.get(e,"collection.meta.owner.id"),userId:s,teamId:l.a.get(e,"shared.userData.identity.team"),teamMembers:l.a.get(e,"shared.team.users"),collectionName:l.a.get(e,"collection.meta.name"),isMember:Object(X.c)(i,s)}})(ee);function MonitorDocs(e){return a.a.createElement("a",{className:"pm-link",href:"https://www.getpostman.com/docs/postman/monitors/intro_monitors",rel:"noopener noreferrer",target:"_blank"},e.children)}function MonitorDescription(){return a.a.createElement("span",null,"Monitor your APIs for performance and response. ",a.a.createElement(MonitorDocs,null,"Postman monitors")," can be used to schedule automated tests, based on your Postman collections.")}function CreateMonitor(e){var t=e.workspace,n=void 0===t?{}:t,o=e.collectionId;return a.a.createElement(c.Button,{size:"md",onClick:function onClick(){e.isMember?d.s.goToRoute("/monitors/create?workspace=".concat(n.id,"&collection=").concat(o)):window.pm.actions.showModal({children:a.a.createElement(J.a,{successPath:"/monitors/create?workspace=".concat(n.id,"&collection=").concat(o),workspace:n})})}},"Monitor this collection")}function NoMonitors(e){return a.a.createElement(m.v,{action:a.a.createElement(CreateMonitor,e),body:a.a.createElement(MonitorDescription,null),className:"workspace__empty",imageSrc:"".concat("https://static.postman.co/img","/monitor.svg"),title:"There are no monitors for this collection in this workspace"})}function CollectionMonitors_typeof(e){return(CollectionMonitors_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CollectionMonitors_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function CollectionMonitors_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CollectionMonitors_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CollectionMonitors_getPrototypeOf(e){return(CollectionMonitors_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CollectionMonitors_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CollectionMonitors_setPrototypeOf(e,t){return(CollectionMonitors_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var ne=function(e){function CollectionMonitors(e){var t;return function CollectionMonitors_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionMonitors),(t=function CollectionMonitors_possibleConstructorReturn(e,t){return!t||"object"!==CollectionMonitors_typeof(t)&&"function"!=typeof t?CollectionMonitors_assertThisInitialized(e):t}(this,CollectionMonitors_getPrototypeOf(CollectionMonitors).call(this,e))).handleTimeframeChange=t.handleTimeframeChange.bind(CollectionMonitors_assertThisInitialized(t)),t}return function CollectionMonitors_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CollectionMonitors_setPrototypeOf(e,t)}(CollectionMonitors,o["Component"]),function CollectionMonitors_createClass(e,t,n){return t&&CollectionMonitors_defineProperties(e.prototype,t),n&&CollectionMonitors_defineProperties(e,n),e}(CollectionMonitors,[{key:"componentDidMount",value:function componentDidMount(){var e=this.props.collectionMeta;document.title=e&&e.name?e.name+" - Monitors":"Collection - Monitors",window.pm.actions.getMonitorMetrics({timeframe:this.getTimeframe()}),window.pm.actions.getWorkspace({workspaceId:this.props.workspaceId})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=l.a.get(this.props,"collectionMeta.name");t!==l.a.get(e,"collectionMeta.name")&&(document.title=t?t+" - Monitors":"Collection - Monitors")}},{key:"UNSAFE_componentWillReceiveProps",value:function UNSAFE_componentWillReceiveProps(e){var t=this.getTimeframe(),n=e.location.query.timeframe,o=e.location.query.view,a=this.props.location.pathname;o&&!l.a.includes(d.f.MONITOR_VIEWS,o)&&d.s.goToRoute("".concat(a,"?view=").concat(d.f.DEFAULT_MONITOR_VIEW,"&timeframe=").concat(n)),n&&!l.a.includes(d.f.MONITOR_TIMEFRAMES,n)&&d.s.goToRoute("".concat(a,"?view=").concat(o,"&timeframe=").concat(d.f.DEFAULT_MONITOR_TIMEFRAME)),n&&n!==t&&window.pm.actions.getMonitorMetrics({timeframe:n})}},{key:"handleTimeframeChange",value:function handleTimeframeChange(e){var t=this.props.location.pathname;d.s.goToRoute("".concat(t,"?timeframe=").concat(e.value))}},{key:"getView",value:function getView(){return l.a.get(this.props.collectionMeta,"permissions.team.access")?"shared":"private"}},{key:"getTimeframe",value:function getTimeframe(){return this.props.location.query.timeframe||d.f.DEFAULT_MONITOR_TIMEFRAME}},{key:"render",value:function render(){var e=this.getView(),t=this.getTimeframe(),n=d.i.pathValueFilter("jobTemplate.collection.shared","shared"===e),o=this.props.monitors.filter(n),i=this.props.workspaceId;return this.props.loading?a.a.createElement(c.Loader,{className:"pm-page-center",pmStyle:"secondary",size:"xl"}):this.props.error?a.a.createElement(m.A,{description:this.props.error.message||"There was an error fetching monitors for this collection.\n        Please try again after some time.",statusCode:this.props.error.statusCode}):Array.isArray(o)&&o.length?(o.forEach(function(e){e.workspaceId=i}),a.a.createElement(m.r,{className:"collection-monitors"},a.a.createElement(m.H,{timeframe:t,onTimeframeChange:this.handleTimeframeChange}),a.a.createElement(m.I,{monitors:o}))):a.a.createElement(m.r,{className:"collection-monitors"},a.a.createElement(NoMonitors,{collectionId:this.props.params.id,isMember:this.props.isMember,workspace:this.props.currentWorkspace}))}}]),CollectionMonitors}();var oe=Object(r.b)(function CollectionMonitors_mapStateToProps(e,t){var n=t.params.id,o=l.a.get(e,"shared.monitors.metrics")||[],a=l.a.get(e,"shared.workspaces.active"),i=l.a.get(e,["shared","workspaces","byId",a]),r=l.a.get(e,["shared","workspaces","byId",a,"dependencies","monitors"])||[],s=l.a.get(e,"shared.userData.identity.user"),c=l.a.get(e,["shared","permissions","collection",n]),u=o.reduce(function(e,t){return l.a.get(t,"jobTemplate.collection.id")===n&&r.indexOf(l.a.get(t,"jobTemplate.id"))>-1&&e.push(function CollectionMonitors_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CollectionMonitors_ownKeys(Object(n),!0).forEach(function(t){CollectionMonitors_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CollectionMonitors_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}({},t,{permissions:c})),e},[]);return{loading:l.a.get(e,"shared.monitors.loadingMetrics")||l.a.get(e,"collection.meta.loading"),error:l.a.get(e,"shared.monitors.errorMetrics"),monitors:u,collectionMeta:l.a.get(e,"collection.meta"),workspaceId:a,isMember:Boolean(l.a.get(i,["members","users",s])),currentWorkspace:i}})(ne);function parseDiffDescription(e){if(!e)return"";if("moved"===e.type)return"This ".concat(e.itemType," has been moved from it's original position");if("deleted"===e.type)return"This ".concat(e.itemType," has been deleted from collection");switch(e.property){case"name":return"Name changed to ".concat(e.source);case"order":return"Reordered requests in this ".concat(e.itemType);case"folders_order":return"Reordered folders in this ".concat(e.itemType);default:return"".concat({added:"Added",modified:"Changed",deleted:"Deleted"}[e.diffType]||""," ").concat(e.propertyName||"")}}function SidebarProp(e){var t=p()("collection-diff-nav__prop",{"collection-diff-nav__prop--conflict":e.conflict}),n=e.conflict?"collection-diff-nav__type--conflict":"collection-diff-nav__type--".concat(e.type),o=e.conflict?"C":(e.type||"m").charAt(0).toUpperCase();return a.a.createElement("a",{className:t,href:"#".concat(e.itemId)},a.a.createElement("span",{className:"collection-diff-nav__type ".concat(n)},o),a.a.createElement("span",{className:"collection-diff-nav__name",title:e.property},e.property),a.a.createElement("span",{className:"collection-diff-nav__diff",title:e.itemDiffDescription},e.itemDiffDescription))}function SidebarTitle(e){return a.a.createElement("a",{className:p()("collection-diff-nav__header",{"collection-diff-nav__header--selected":e.isSelected}),href:"#".concat(e.itemId)},a.a.createElement("span",{className:"collection-diff-nav__type collection-diff-nav__type--".concat(e.type)},"string"==typeof e.type?(e.type||"m").charAt(0).toUpperCase():"M"),a.a.createElement("span",{className:"collection-diff-nav__item-name",title:e.title},e.itemType,": ",e.title),a.a.createElement("span",{className:"float--right"},e.length||1))}function diff_Sidebar_Sidebar(e){var t=e.diff;return a.a.createElement("div",{className:"collection-diff-nav"},Object.keys(t).map(function(e,n){var o=l.a.get(t,[e,"isNestedDiff"]);return a.a.createElement("div",{className:"push--bottom",key:n},a.a.createElement(SidebarTitle,{itemId:e,itemType:l.a.get(t,[e,"itemType"]),length:l.a.get(t,[e,"diff","length"]),title:l.a.get(t,[e,"name"]),type:l.a.get(t,[e,"type"],"modified")}),t[e].diff.map(function(t,n){return l.a.isEmpty(t)?null:o&&l.a.get(t,"isSection")?a.a.createElement(SidebarProp,{itemDiffDescription:parseDiffDescription(t),itemId:e,key:n,property:t.name,type:t.type}):a.a.createElement(SidebarProp,{conflict:t.conflict,itemDiffDescription:parseDiffDescription(t),itemId:e,key:n,property:t.propertyName,type:t.diffType})}))}))}function TopbarActions(e){var t=e.canMergeCollection?e.hasConflicts?"Please resolve all the conflicts before merging the collection":"":"You don't have permissions to merge this collection",n=e.pullChanges?"Pull changes":"Merge all changes";return a.a.createElement("div",{className:"collection-diff-topbar__actions"},a.a.createElement(c.Button,{pmStyle:"secondary",size:"sm",onClick:function onClick(){d.s.goToRoute("/workspaces/".concat(e.activeWorkspace,"/collections"))}},"Cancel"),a.a.createElement(c.Tooltip,{align:"left",content:t,show:e.hasConflicts||!e.canMergeCollection},function(t){return a.a.createElement("div",{ref:t.triggerRef,onMouseOut:t.onMouseOut,onMouseOver:t.onMouseOver},a.a.createElement(c.Button,{disabled:e.merging||e.hasConflicts||!e.canMergeCollection,pmStyle:"primary",size:"sm",onClick:e.onMerge},e.loading?a.a.createElement(c.Loader,null):n))}))}function TopbarDescription(e){return a.a.createElement("div",{className:"collection-diff-topbar__description"},a.a.createElement(c.UserIcon,{className:"collection-diff-topbar__icon",size:"sm",url:e.profilePicUrl,userId:e.userId}),a.a.createElement("div",{className:"collection-diff-topbar__collection-name"},a.a.createElement(i.c,{className:"collection-conflict-source",title:"".concat(e.forkedCollection.name," [").concat(e.forkedCollection.label,"]"),to:"/collections/".concat(e.forkedCollection.id)},a.a.createElement("span",null,"SOURCE")," ",e.forkedCollection.name," [",e.forkedCollection.label,"]"),a.a.createElement("div",{className:"collection-diff-topbar__seperator"},a.a.createElement(c.Icon,{name:"forward",size:"sm"})),a.a.createElement(i.c,{className:"collection-conflict-dest",title:"".concat(e.baseCollection.name," [").concat(e.baseCollection.label,"]"),to:"/collections/".concat(e.baseCollection.id)},a.a.createElement("span",null,"DESTINATION")," ",e.baseCollection.name," [",e.baseCollection.label,"]")))}function Topbar_Topbar(e){return a.a.createElement("div",{className:"collection-diff-topbar"},a.a.createElement(TopbarDescription,{baseCollection:e.baseCollection,forkedCollection:e.forkedCollection,profilePicUrl:e.profilePicUrl,userId:e.userId,userName:e.userName}),a.a.createElement(TopbarActions,{activeWorkspace:e.activeWorkspace,canMergeCollection:e.canMergeCollection,hasConflicts:e.hasConflicts,merging:e.merging,pullChanges:e.pullChanges,onMerge:e.onMerge}))}function DiffItemLabel(e){return"request"===e.itemType?a.a.createElement(RequestIcon,{className:"collection-diff-body__request-label",method:l.a.get(e.itemMeta,"method")||""}):a.a.createElement(c.Icon,{className:"push-half--right",name:"response"===e.itemType?"example":e.itemType,size:"sm"})}function DiffItemTitle(e){var t;return"added"===e.diffType?t="success":"deleted"===e.diffType?t="error":"conflict"===e.diffType?t="warning":"moved"===e.diffType&&(t="info"),a.a.createElement("h3",{className:"collection-diff-body__heading ".concat(e.className),id:e.itemId,onClick:e.onClick},a.a.createElement(DiffItemLabel,{itemMeta:e.itemMeta,itemType:e.itemType}),a.a.createElement("span",{className:"push-half--right",title:e.itemName},e.itemName),a.a.createElement(c.Badge,{pmStyle:t,size:"sm"},e.diffType),"moved"===e.diffType&&a.a.createElement(m.C,{align:"right",className:"push-half--left pm-collection-list-item__write",content:"This ".concat(e.itemType," has been moved to\n            ").concat(l.a.get(e,"to.model")," ").concat(l.a.get(e,"to.name")),name:"warning",size:"sm"}))}function DiffItemProperty(e){return a.a.createElement("div",{className:"collection-diff-body__title"},e.propertyName,e.conflict&&a.a.createElement(c.Badge,{className:"push-half--left",pmStyle:"warning",size:"sm"},"Conflict"))}function NestedDiffItemSection(e){var t=e.diff;return a.a.createElement("div",{className:"pm-conflict collection-diff-body__nested-section pm-conflict--".concat(e.conflictType)},a.a.createElement(ae,{diffItem:t,itemId:e.itemId}),t.conflictType&&a.a.createElement(m.q,{type:t.conflictType,onResolveConflicts:function onResolveConflicts(){e.onResolveConflicts(t.conflictType)}}))}function DiffItemSection(e){var t=e.diff;return t&&"function"!=typeof t.getDiff?null:a.a.createElement("div",{className:"collection-diff-body__section",id:"".concat(t.itemId)},a.a.createElement(DiffItemProperty,{conflict:t.conflict,propertyName:t.propertyName}),"words"===t.type&&a.a.createElement(m.fb,{diff:t}),"code"===t.type&&a.a.createElement(m.j,{diff:t}),"table"===t.type&&a.a.createElement(m.Y,{diff:t,showDescriptionColumn:"variables"!==t.propertyName||"response headers"!==t.propertyName,showEnabledColumn:"variables"!==t.propertyName||"response headers"!==t.propertyName}),"sentences"===t.type&&a.a.createElement(m.U,{diff:t}))}var ae=Object(m.gb)(function(e){var t=e.itemId,n=e.diffItem,o=e.expanded,i=e.toggleExpanded;if(!n)return null;var r=n.isNestedDiff,s=(n.diff||[]).length>0;return a.a.createElement("div",{className:"collection-diff-body__collapsible"},a.a.createElement(DiffItemTitle,{className:p()("collection-diff-body__toggle",{"is-visible":o&&s}),diffType:n.type,itemId:t,itemMeta:n.meta,itemName:n.name,itemType:n.itemType,to:n.to,onClick:i}),o&&(n.diff||[]).map(function(e,o){return r&&l.a.get(e,"isSection")?a.a.createElement(NestedDiffItemSection,{conflictType:e.conflictType,diff:e,itemId:t,onResolveConflicts:n.resolveConflicts}):a.a.createElement(DiffItemSection,{diff:e,itemId:n.itemId,itemType:n.itemType,key:o})}))});function Body(e){var t=e.diff,n=void 0===t?{}:t;return a.a.createElement("div",{className:"collection-diff-body"},Object.keys(n).map(function(e,t){return a.a.createElement(ae,{diffItem:n[e],itemId:e,key:t})}))}function MergeCollectionModal_typeof(e){return(MergeCollectionModal_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function MergeCollectionModal_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function MergeCollectionModal_getPrototypeOf(e){return(MergeCollectionModal_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function MergeCollectionModal_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function MergeCollectionModal_setPrototypeOf(e,t){return(MergeCollectionModal_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}var ie=[{label:"Merge changes",name:"default",description:"The destination will be updated with the changes"},{label:"Merge changes and update source",name:"updateSourceWithDestination",description:"Both the source and destination will be updated"},{label:"Merge changes and delete source",name:"deleteSource",description:"The destination will be updated and the fork will be deleted"}],re=function(e){function MergeCollection(e){var t;return function MergeCollectionModal_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,MergeCollection),(t=function MergeCollectionModal_possibleConstructorReturn(e,t){return!t||"object"!==MergeCollectionModal_typeof(t)&&"function"!=typeof t?MergeCollectionModal_assertThisInitialized(e):t}(this,MergeCollectionModal_getPrototypeOf(MergeCollection).call(this,e))).state={selectedMergeStrategy:"default"},t.handleMergeStrategyChange=t.handleMergeStrategyChange.bind(MergeCollectionModal_assertThisInitialized(t)),t.handleConfirm=t.handleConfirm.bind(MergeCollectionModal_assertThisInitialized(t)),t}return function MergeCollectionModal_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&MergeCollectionModal_setPrototypeOf(e,t)}(MergeCollection,o["Component"]),function MergeCollectionModal_createClass(e,t,n){return t&&MergeCollectionModal_defineProperties(e.prototype,t),n&&MergeCollectionModal_defineProperties(e,n),e}(MergeCollection,[{key:"handleMergeStrategyChange",value:function handleMergeStrategyChange(e){this.setState({selectedMergeStrategy:e.target.value})}},{key:"handleConfirm",value:function handleConfirm(){var e="default"===this.state.selectedMergeStrategy?null:this.state.selectedMergeStrategy;this.props.onConfirm(e),"updateSourceWithDestination"===this.state.selectedMergeStrategy?d.a.recordEvent("initiateMergeChangeUpdate"):"deleteSource"===this.state.selectedMergeStrategy?d.a.recordEvent("initiateMergeChangeDelete"):d.a.recordEvent("initiateMergeChange")}},{key:"render",value:function render(){var e=this;return a.a.createElement(c.Card,{className:"collection-merge"},a.a.createElement("h3",{className:"pm-h3"},"Confirm merge"),a.a.createElement("p",{className:"collection-merge__name"},l.a.get(this.props,"entity.name")||"Collection"),a.a.createElement(c.Button,{className:"collection-merge__close",icon:"close-big",pmStyle:"alternate",size:"sm",onClick:this.props.hideModal}),a.a.createElement("hr",{className:"push--ends"}),a.a.createElement("label",{className:"collection-merge__label"},"Choose how you want to proceed"),ie.map(function(t,n){return a.a.createElement("div",{className:p()("collection-merge__option",{"collection-merge__option--active":e.state.selectedMergeStrategy===t.name}),key:n},a.a.createElement(c.Radio,{checked:e.state.selectedMergeStrategy===t.name,className:"collection-merge__radio",label:l.a.get(t,"label"),name:"merge-strategy",size:"md",value:t.name,onChange:e.handleMergeStrategyChange}),a.a.createElement("p",{className:"push-one-half--left"},l.a.get(t,"description")))}),a.a.createElement(c.FormActions,{cancelButtonClass:"collection-merge__cancel",cancelText:"Cancel",className:"collection-merge__actions",confirmDisabled:!this.state.selectedMergeStrategy,confirming:this.props.merging,confirmText:"Merge",size:"md",onCancel:this.props.hideModal,onConfirm:this.handleConfirm}))}}]),MergeCollection}();var se=Object(r.b)(function MergeCollectionModal_mapStateToProps(e){var t=l.a.get(e,"collection.diff",{});return{merging:l.a.get(t,"merging")}},l.a.pick(j.b,["hideModal"]))(re);function CollectionDiff_typeof(e){return(CollectionDiff_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function _typeof(e){return typeof e}:function _typeof(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function CollectionDiff_ownKeys(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,o)}return n}function CollectionDiff_objectSpread(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?CollectionDiff_ownKeys(Object(n),!0).forEach(function(t){CollectionDiff_defineProperty(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):CollectionDiff_ownKeys(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}function CollectionDiff_defineProperties(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function CollectionDiff_getPrototypeOf(e){return(CollectionDiff_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function _getPrototypeOf(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function CollectionDiff_assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function CollectionDiff_setPrototypeOf(e,t){return(CollectionDiff_setPrototypeOf=Object.setPrototypeOf||function _setPrototypeOf(e,t){return e.__proto__=t,e})(e,t)}function CollectionDiff_defineProperty(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function resolveEventsConflicts(e,t,n,o){Array.isArray(l.a.get(e,[t.itemType,"update",n,"events","to"]))||l.a.set(e,[t.itemType,"update",n,"events","to"],[]);var a="prerequest"===o?"preRequestScript":"tests",i=t.getResolvedConflict()||"";e[t.itemType].update[n].events.to.push({listen:o,script:{id:t.scriptId,exec:i.split("\n"),type:t.scriptType}}),"request"===t.itemType&&l.a.set(e,[t.itemType,"update",n,a,"to"],i)}function resolveGraphqlBodyConflicts(e,t,n,o){var a=t.getResolvedConflict()||[];l.a.set(e,[t.itemType,"update",n,"graphqlModeData",o,"to"],a)}function findResolvedConflicts(e){var t={};return Object.keys(e).forEach(function(n){var o=e[n];o.diff.forEach(function(e){e.conflict&&("headerData"===e.property?function resolveHeaderConflicts(e,t,n){var o=t.getResolvedConflict()||[],a=o.map(function(e){return e?"".concat(e.key,": ").concat(e.value):""}).join("\n");l.a.set(e,[t.itemType,"update",n,"headers","to"],a),l.a.set(e,[t.itemType,"update",n,t.property,"to"],o)}(t,e,n):"prerequest"===e.property?resolveEventsConflicts(t,e,n,"prerequest"):"test"===e.property?resolveEventsConflicts(t,e,n,"test"):"auth"===e.property?function resolveAuthConflicts(e,t,n){var o=t.getResolvedConflict()||"",a=(t.base||"").split("\n"),i=l.a.get(l.a.get(a,"0","").split(":"),"1","").trim(),r=o.split("\n"),s=l.a.get(l.a.get(r,"0","").split(":"),"1","").trim(),c=r.slice(1).map(function(e){var t=e.split(":");return{key:(l.a.get(t,"0")||"").trim(),value:(l.a.get(t,"1")||"").trim(),type:"string"}});l.a.set(e,[t.itemType,"update",n,t.property,"to"],CollectionDiff_defineProperty({type:s},s,c)),i!==s&&l.a.set(e,[t.itemType,"update",n,"currentHelper","to"],s),l.a.set(e,[t.itemType,"update",n,"helperAttributes","to"],o)}(t,e,n):"pathVariableData"===e.property?function resolvePathVariablesConflicts(e,t,n){var o=t.getResolvedConflict()||[],a=o.reduce(function(e,t){return t?(e[t.key]=t.value,e):e},{});l.a.set(e,[t.itemType,"update",n,"pathVariables","to"],a),l.a.set(e,[t.itemType,"update",n,t.property,"to"],o)}(t,e,n):"responseCode"===e.property?function resolveStatusCodeConflicts(e,t,n){var o,a,i=t.getResolvedConflict()||"",r=i.split(" ");r.length>0?isNaN(parseInt(r[0]))?(o=parseInt(r[0]),a=r.slice(1).join(" ")):a=i:a="",l.a.set(e,[t.itemType,"update",n,t.property,"to"],{code:o,name:a})}(t,e,n):"graphql_query"===e.property?resolveGraphqlBodyConflicts(t,e,n,"query"):"graphql_variables"===e.property?resolveGraphqlBodyConflicts(t,e,n,"variables"):l.a.set(t,[e.itemType,"update",n,e.property,"to"],e.getResolvedConflict()))}),"conflict"===o.type&&("update_destroy"===o.conflictType?function resolveUpdateDestroyConflicts(e,t,n){var o;"deleted"===t.type?(o={deleted:!0},l.a.set(e,[t.itemType,"update_destroy",n],o)):"modified"===t.type&&(o=(l.a.get(t,"diff")||[]).reduce(function(e,t){return e[t.property]={from:t.base,to:t.source},e},{}),l.a.set(e,[t.itemType,"update_destroy",n,"diff"],o))}(t,l.a.get(o,"diff.0"),n):"transfer_destroy"===o.conflictType?function resolveTransferDestroyConflcits(e,t,n){var o;"deleted"===t.type?(o={deleted:!0},l.a.set(e,[t.itemType,"transfer_destroy",n],o)):"moved"===t.type&&(o=l.a.get(t,"to"),l.a.set(e,[t.itemType,"transfer_destroy",n,"to"],o))}(t,l.a.get(o,"diff.0"),n):"transfer"===o.conflictType&&l.a.set(t,[o.itemType,"transfer",n,"to"],l.a.get(o,"diff.0.to")))}),t}function OutOfSyncAlert(e){return a.a.createElement(c.Alert,{dismissable:!0,globalAlert:!0,showCta:!0,showIcon:!0,AlertCtaText:"Pull Changes",pmStyle:"warning",onCtaClick:function onCtaClick(){d.s.goToRoute({location:"/collections/".concat(l.a.get(e,"forkedCollection.id"),"/diff")+"?source=".concat(l.a.get(e,"baseCollection.id"),"&pull_changes=true"),target:"parent"}),d.a.recordEvent("initiatePullChanges")}},"The original collection has been modified since you last updated the fork. We’d recommend pulling changes before continuing.")}var le=function(e){function CollectionDiff(e){var t;return function CollectionDiff_classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,CollectionDiff),(t=function CollectionDiff_possibleConstructorReturn(e,t){return!t||"object"!==CollectionDiff_typeof(t)&&"function"!=typeof t?CollectionDiff_assertThisInitialized(e):t}(this,CollectionDiff_getPrototypeOf(CollectionDiff).call(this,e))).onMerge=t.onMerge.bind(CollectionDiff_assertThisInitialized(t)),t}return function CollectionDiff_inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&CollectionDiff_setPrototypeOf(e,t)}(CollectionDiff,o["Component"]),function CollectionDiff_createClass(e,t,n){return t&&CollectionDiff_defineProperties(e.prototype,t),n&&CollectionDiff_defineProperties(e,n),e}(CollectionDiff,[{key:"componentDidMount",value:function componentDidMount(){window.pm.actions.getCollectionDiff({baseCollectionId:this.props.baseCollection.id,forkedCollectionId:this.props.forkedCollection.id})}},{key:"componentDidUpdate",value:function componentDidUpdate(e){var t=this.props,n=t.location,o=t.loading;e.loading&&!o&&scrollToHash(n.hash),this.props.loaded&&e.loaded!==this.props.loaded&&(this.props.pullChanges?(d.a.recordEvent("pullChangesDisplayed"),this.props.numberOfConflicts>0&&d.a.recordEvent("conflictsDisplayed",{label:"diff_view_pull"}),l.a.isEmpty(this.props.diff)&&d.a.recordEvent("noChangesViewed")):(d.a.recordEvent("viewDiffView"),this.props.numberOfConflicts>0&&d.a.recordEvent("conflictsDisplayed",{label:"diff_view"})))}},{key:"onMerge",value:function onMerge(){var e,t={baseCollectionId:this.props.baseCollection.id,forkedCollectionId:this.props.forkedCollection.id,workspace:this.props.activeWorkspace,resolved_conflicts:findResolvedConflicts(this.props.diff)};this.props.pullChanges?window.pm.actions.mergeCollection(CollectionDiff_objectSpread({},t,{pullChanges:!0})):(e={entity:{type:"collection",name:l.a.get(this.props,"forkedCollection.name","Collection"),id:l.a.get(this.props,"forkedCollection.id")},onConfirm:function onConfirm(e){window.pm.actions.mergeCollection(CollectionDiff_objectSpread({},t,{mergeStrategy:e}))}},window.pm.actions.showModal({children:a.a.createElement(se,e)}))}},{key:"render",value:function render(){var e=this;if(this.props.loading)return a.a.createElement(m.K,null);if(this.props.error)return a.a.createElement(m.A,{description:this.props.error.description,title:this.props.error.title});if(l.a.isEmpty(this.props.diff)){var t=a.a.createElement(c.Button,{pmStyle:"secondary",size:"md",onClick:function onClick(){d.s.goToRoute("workspaces/".concat(e.props.activeWorkspace,"/collections"))}},"Back to collections");return a.a.createElement(o.Fragment,null,this.props.outOfSync&&!this.props.pullChanges&&a.a.createElement(OutOfSyncAlert,this.props),a.a.createElement(m.v,{action:t,body:"This fork has no changes from the destination collection.",className:"workspace__empty",imageSrc:"".concat("https://static.postman.co/img","/activity.svg"),title:"Nothing to merge"}))}return a.a.createElement(o.Fragment,null,this.props.outOfSync&&!this.props.pullChanges&&a.a.createElement(OutOfSyncAlert,this.props),a.a.createElement(diff_Sidebar_Sidebar,{diff:this.props.diff}),a.a.createElement(Topbar_Topbar,{activeWorkspace:this.props.activeWorkspace,baseCollection:this.props.baseCollection,canMergeCollection:d.n.canMergeCollection(this.props.collectionPermissions),forkedCollection:this.props.forkedCollection,hasConflicts:this.props.numberOfConflicts>0,merging:this.props.merging,profilePicUrl:this.props.profilePicUrl,pullChanges:this.props.pullChanges,userId:this.props.userId,userName:this.props.userName,onMerge:this.onMerge}),a.a.createElement(Body,{diff:this.props.diff}))}}]),CollectionDiff}();var ce=Object(r.b)(function CollectionDiff_mapStateToProps(e,t){var n=e.shared.userData,o=e.collection.diff;return{activeWorkspace:l.a.get(t,"location.query.workspace"),profilePicUrl:l.a.get(n,"user.profile_pic_url"),userId:l.a.get(n,"identity.user"),baseCollection:{id:l.a.get(t,"params.id"),name:l.a.get(o,"baseCollectionMeta.name","Collection"),label:l.a.get(o,"baseCollectionMeta.forkName","Origin")},forkedCollection:{id:l.a.get(t,"location.query.source"),name:l.a.get(o,"sourceCollectionMeta.name","Collection"),label:l.a.get(o,"sourceCollectionMeta.forkName","Origin")},collectionPermissions:l.a.get(e,["permissions","collection",t.params.id]),merging:l.a.get(o,"merging"),loading:l.a.get(o,"loading"),loaded:l.a.get(o,"loaded"),pullChanges:l.a.get(t,"location.query.pull_changes"),error:l.a.get(o,"error"),diff:l.a.get(o,"diff"),outOfSync:l.a.get(o,"outOfSync"),numberOfConflicts:l.a.get(o,"numberOfConflicts",0)}})(le),ue=a.a.createElement(i.e,null,a.a.createElement(i.e,{component:Object(m.kb)(_),path:"collections"},a.a.createElement(i.a,{to:"/workspaces"}),a.a.createElement(i.e,{path:":id"},a.a.createElement(i.b,{component:Object(m.kb)(q)}),a.a.createElement(i.e,{component:Object(m.kb)(oe),path:"monitors"}),a.a.createElement(i.e,{component:Object(m.kb)(V),path:"activity"}),a.a.createElement(i.e,{component:Object(m.kb)(te),path:"mocks"}))),a.a.createElement(i.e,{component:Object(m.kb)(Z),path:"/collections/:id/publish"}),a.a.createElement(i.e,{component:Object(m.kb)(ce),path:"/collections/:id/diff"}));t.default=ue},ttZb:function(e,t,n){"use strict";n.d(t,"a",function(){return useMutation}),n.d(t,"b",function(){return useQuery});var o=n("lqOT"),a=n("mrSG"),i=n("q1tI"),r=n("dMq0"),s=n("qx2n"),l=n("qVdT"),c=function(){function OperationData(e,t){this.isMounted=!1,this.previousOptions={},this.context={},this.options={},this.options=e||{},this.context=t||{}}return OperationData.prototype.getOptions=function(){return this.options},OperationData.prototype.setOptions=function(e){Object(s.a)(this.options,e)||(this.previousOptions=this.options),this.options=e},OperationData.prototype.unmount=function(){this.isMounted=!1},OperationData.prototype.refreshClient=function(){var e=this.options&&this.options.client||this.context&&this.context.client;Object(l.b)(!!e,2);var t=!1;return e!==this.client&&(t=!0,this.client=e,this.cleanup()),{client:this.client,isNew:t}},OperationData.prototype.verifyDocumentType=function(e,t){var n=Object(o.e)(e);Object(o.d)(t),Object(o.d)(n.type);Object(l.b)(n.type===t,3)},OperationData}(),u=function(e){function QueryData(t){var n=t.options,o=t.context,a=t.forceUpdate,i=e.call(this,n,o)||this;return i.previousData={},i.currentObservable={},i.runLazy=!1,i.runLazyQuery=function(e){i.runLazy=!0,i.lazyOptions=e,i.forceUpdate()},i.getExecuteResult=function(){var e=i.getQueryResult();return i.startQuerySubscription(),e},i.forceUpdate=a,i}return Object(a.c)(QueryData,e),QueryData.prototype.execute=function(){this.refreshClient();var e=this.getOptions(),t=e.skip,n=e.query;return(t||n!==this.previousData.query)&&(this.removeQuerySubscription(),this.previousData.query=n),this.updateObservableQuery(),this.isMounted&&this.startQuerySubscription(),this.getExecuteSsrResult()||this.getExecuteResult()},QueryData.prototype.executeLazy=function(){return this.runLazy?[this.runLazyQuery,this.execute()]:[this.runLazyQuery,{loading:!1,networkStatus:r.b.ready,called:!1,data:void 0}]},QueryData.prototype.fetchData=function(){if(this.getOptions().skip)return!1;var e=this.getOptions(),t=(e.children,e.ssr),n=(e.displayName,e.skip,e.onCompleted,e.onError,e.partialRefetch,Object(a.f)(e,["children","ssr","displayName","skip","onCompleted","onError","partialRefetch"])),o=n.fetchPolicy;if(!1===t)return!1;"network-only"!==o&&"cache-and-network"!==o||(o="cache-first");var i=this.refreshClient().client.watchQuery(Object(a.a)({},n,{fetchPolicy:o}));return this.context&&this.context.renderPromises&&this.context.renderPromises.registerSSRObservable(i,this.getOptions()),!!this.currentObservable.query.getCurrentResult().loading&&i.result()},QueryData.prototype.afterExecute=function(e){var t=this,n=(void 0===e?{}:e).lazy,o=void 0!==n&&n;return this.isMounted=!0,o&&!this.runLazy||(this.handleErrorOrCompleted(),setTimeout(function(){t.currentObservable.query&&t.currentObservable.query.resetQueryStoreErrors()})),this.unmount.bind(this)},QueryData.prototype.cleanup=function(){this.removeQuerySubscription(),delete this.currentObservable.query,delete this.previousData.result},QueryData.prototype.getOptions=function(){var t=e.prototype.getOptions.call(this),n=this.lazyOptions||{},o=Object(a.a)({},t,{variables:Object(a.a)({},t.variables,n.variables),context:Object(a.a)({},t.context,n.context)});return this.runLazy&&delete o.skip,o},QueryData.prototype.getExecuteSsrResult=function(){var e,t={loading:!0,networkStatus:r.b.loading,called:!0,data:{}};return this.context&&this.context.renderPromises&&((e=this.context.renderPromises.addQueryPromise(this,this.getExecuteResult))||(e=t)),e},QueryData.prototype.prepareObservableQueryOptions=function(){this.verifyDocumentType(this.getOptions().query,o.b.Query);var e=this.getOptions().displayName||"Query";return Object(a.a)({},this.getOptions(),{displayName:e,context:this.getOptions().context||{},metadata:{reactComponent:{displayName:e}}})},QueryData.prototype.observableQueryFields=function(e){return{variables:e.variables,refetch:e.refetch.bind(e),fetchMore:e.fetchMore.bind(e),updateQuery:e.updateQuery.bind(e),startPolling:e.startPolling.bind(e),stopPolling:e.stopPolling.bind(e),subscribeToMore:e.subscribeToMore.bind(e)}},QueryData.prototype.initializeObservableQuery=function(){if(this.context&&this.context.renderPromises&&(this.currentObservable.query=this.context.renderPromises.getSSRObservable(this.getOptions())),!this.currentObservable.query){var e=this.prepareObservableQueryOptions();this.previousData.observableQueryOptions=Object(a.a)({},e,{children:null}),this.currentObservable.query=this.refreshClient().client.watchQuery(e)}},QueryData.prototype.updateObservableQuery=function(){this.currentObservable.query||this.initializeObservableQuery();var e=Object(a.a)({},this.prepareObservableQueryOptions(),{children:null});Object(s.a)(e,this.previousData.observableQueryOptions)||(this.previousData.observableQueryOptions=e,this.currentObservable.query.setOptions(e).catch(function(){}))},QueryData.prototype.startQuerySubscription=function(){var e=this;if(!this.currentObservable.subscription&&!this.getOptions().skip){var t=this.currentObservable.query;this.currentObservable.subscription=t.subscribe({next:function(t){var n=t.loading,o=t.networkStatus,a=t.data;e.previousData.result&&e.previousData.result.loading===n&&e.previousData.result.networkStatus===o&&Object(s.a)(e.previousData.result.data,a||{})||e.forceUpdate()},error:function(t){if(e.resubscribeToQuery(),!t.hasOwnProperty("graphQLErrors"))throw t;Object(s.a)(t,e.previousData.error)||(e.previousData.error=t,e.forceUpdate())}})}},QueryData.prototype.resubscribeToQuery=function(){this.removeQuerySubscription();var e=this.currentObservable.query.getLastError(),t=this.currentObservable.query.getLastResult();this.currentObservable.query.resetLastResults(),this.startQuerySubscription(),Object.assign(this.currentObservable.query,{lastError:e,lastResult:t})},QueryData.prototype.getQueryResult=function(){var e={data:Object.create(null)};if(Object.assign(e,this.observableQueryFields(this.currentObservable.query)),this.getOptions().skip)e=Object(a.a)({},e,{data:void 0,error:void 0,loading:!1,called:!0});else{var t=this.currentObservable.query.getCurrentResult(),n=t.loading,o=t.partial,i=t.networkStatus,s=t.errors,l=t.error,c=t.data;if(c=c||Object.create(null),s&&s.length>0&&(l=new r.a({graphQLErrors:s})),Object.assign(e,{loading:n,networkStatus:i,error:l,called:!0}),n){var u=this.previousData.result?this.previousData.result.data:{};Object.assign(e.data,u,c)}else if(l)Object.assign(e,{data:(this.currentObservable.query.getLastResult()||{}).data});else{var p=this.currentObservable.query.options.fetchPolicy;if(this.getOptions().partialRefetch&&0===Object.keys(c).length&&o&&"cache-only"!==p)return Object.assign(e,{loading:!0,networkStatus:r.b.loading}),e.refetch(),e;Object.assign(e.data,c)}}return e.client=this.client,this.previousData.loading=this.previousData.result&&this.previousData.result.loading||!1,this.previousData.result=e,e},QueryData.prototype.handleErrorOrCompleted=function(){var e=this.currentObservable.query.getCurrentResult(),t=e.data,n=e.loading,o=e.error;if(!n){var a=this.getOptions(),i=a.query,r=a.variables,l=a.onCompleted,c=a.onError;if(this.previousOptions&&!this.previousData.loading&&Object(s.a)(this.previousOptions.query,i)&&Object(s.a)(this.previousOptions.variables,r))return;l&&!o?l(t):c&&o&&c(o)}},QueryData.prototype.removeQuerySubscription=function(){this.currentObservable.subscription&&(this.currentObservable.subscription.unsubscribe(),delete this.currentObservable.subscription)},QueryData}(c);function useBaseQuery(e,t,n){void 0===n&&(n=!1);var r=Object(i.useContext)(Object(o.c)()),l=Object(i.useReducer)(function(e){return e+1},0),c=l[0],p=l[1],m=t?Object(a.a)({},t,{query:e}):{query:e},d=Object(i.useRef)();d.current||(d.current=new u({options:m,context:r,forceUpdate:p}));var h=d.current;h.setOptions(m),h.context=r;var f=function useDeepMemo(e,t){var n=Object(i.useRef)();return n.current&&Object(s.a)(t,n.current.key)||(n.current={key:t,value:e()}),n.current.value}(function(){return n?h.executeLazy():h.execute()},{options:m,context:r,tick:c});return Object(i.useEffect)(function(){return h.afterExecute({lazy:n})},[f]),Object(i.useEffect)(function(){return function(){return h.cleanup()}},[]),f}function useQuery(e,t){return useBaseQuery(e,t,!1)}var p=function(e){function MutationData(t){var n=t.options,a=t.context,i=t.result,r=t.setResult,s=e.call(this,n,a)||this;return s.runMutation=function(e){void 0===e&&(e={}),s.onMutationStart();var t=s.generateNewMutationId();return s.mutate(e).then(function(e){return s.onMutationCompleted(e,t),e}).catch(function(e){if(s.onMutationError(e,t),!s.getOptions().onError)throw e})},s.verifyDocumentType(n.mutation,o.b.Mutation),s.result=i,s.setResult=r,s.mostRecentMutationId=0,s}return Object(a.c)(MutationData,e),MutationData.prototype.execute=function(e){return this.isMounted=!0,this.verifyDocumentType(this.getOptions().mutation,o.b.Mutation),[this.runMutation,e]},MutationData.prototype.afterExecute=function(){return this.isMounted=!0,this.unmount.bind(this)},MutationData.prototype.cleanup=function(){},MutationData.prototype.mutate=function(e){var t=this.getOptions(),n=t.mutation,o=t.variables,i=t.optimisticResponse,r=t.update,s=t.context,l=void 0===s?{}:s,c=t.awaitRefetchQueries,u=void 0!==c&&c,p=t.fetchPolicy,m=Object(a.a)({},e),d=Object.assign({},o,m.variables);return delete m.variables,this.refreshClient().client.mutate(Object(a.a)({mutation:n,optimisticResponse:i,refetchQueries:m.refetchQueries||this.getOptions().refetchQueries,awaitRefetchQueries:u,update:r,context:l,fetchPolicy:p,variables:d},m))},MutationData.prototype.onMutationStart=function(){this.result.loading||this.getOptions().ignoreResults||this.updateResult({loading:!0,error:void 0,data:void 0,called:!0})},MutationData.prototype.onMutationCompleted=function(e,t){var n=this.getOptions(),o=n.onCompleted,a=n.ignoreResults,i=e.data,s=e.errors,l=s&&s.length>0?new r.a({graphQLErrors:s}):void 0;this.isMostRecentMutation(t)&&!a&&this.updateResult({called:!0,loading:!1,data:i,error:l}),o&&o(i)},MutationData.prototype.onMutationError=function(e,t){var n=this.getOptions().onError;this.isMostRecentMutation(t)&&this.updateResult({loading:!1,error:e,data:void 0,called:!0}),n&&n(e)},MutationData.prototype.generateNewMutationId=function(){return++this.mostRecentMutationId},MutationData.prototype.isMostRecentMutation=function(e){return this.mostRecentMutationId===e},MutationData.prototype.updateResult=function(e){!this.isMounted||this.previousResult&&Object(s.a)(this.previousResult,e)||(this.setResult(e),this.previousResult=e)},MutationData}(c);function useMutation(e,t){var n=Object(i.useContext)(Object(o.c)()),r=Object(i.useState)({called:!1,loading:!1}),s=r[0],l=r[1],c=t?Object(a.a)({},t,{mutation:e}):{mutation:e},u=Object(i.useRef)();var m=function getMutationDataRef(){return u.current||(u.current=new p({options:c,context:n,result:s,setResult:l})),u.current}();return m.setOptions(c),m.context=n,Object(i.useEffect)(function(){return m.afterExecute()}),m.execute(s)}!function(e){function SubscriptionData(t){var n=t.options,o=t.context,a=t.setResult,i=e.call(this,n,o)||this;return i.currentObservable={},i.setResult=a,i.initialize(n),i}Object(a.c)(SubscriptionData,e),SubscriptionData.prototype.execute=function(e){var t=e;this.refreshClient().isNew&&(t=this.getLoadingResult());var n=this.getOptions().shouldResubscribe;return"function"==typeof n&&(n=!!n(this.getOptions())),!1!==n&&this.previousOptions&&Object.keys(this.previousOptions).length>0&&(this.previousOptions.subscription!==this.getOptions().subscription||!Object(s.a)(this.previousOptions.variables,this.getOptions().variables))&&(this.endSubscription(),delete this.currentObservable.query,t=this.getLoadingResult()),this.initialize(this.getOptions()),this.startSubscription(),this.previousOptions=this.getOptions(),Object(a.a)({},t,{variables:this.getOptions().variables})},SubscriptionData.prototype.afterExecute=function(){this.isMounted=!0},SubscriptionData.prototype.cleanup=function(){this.endSubscription(),delete this.currentObservable.query},SubscriptionData.prototype.initialize=function(e){this.currentObservable.query||(this.currentObservable.query=this.refreshClient().client.subscribe({query:e.subscription,variables:e.variables,fetchPolicy:e.fetchPolicy}))},SubscriptionData.prototype.startSubscription=function(){this.currentObservable.subscription||(this.currentObservable.subscription=this.currentObservable.query.subscribe({next:this.updateCurrentData.bind(this),error:this.updateError.bind(this),complete:this.completeSubscription.bind(this)}))},SubscriptionData.prototype.getLoadingResult=function(){return{loading:!0,error:void 0,data:void 0}},SubscriptionData.prototype.updateResult=function(e){this.isMounted&&this.setResult(e)},SubscriptionData.prototype.updateCurrentData=function(e){var t=this.getOptions().onSubscriptionData;this.updateResult({data:e.data,loading:!1,error:void 0}),t&&t({client:this.refreshClient().client,subscriptionData:e})},SubscriptionData.prototype.updateError=function(e){this.updateResult({error:e,loading:!1})},SubscriptionData.prototype.completeSubscription=function(){var e=this.getOptions().onSubscriptionComplete;e&&e(),this.endSubscription()},SubscriptionData.prototype.endSubscription=function(){this.currentObservable.subscription&&(this.currentObservable.subscription.unsubscribe(),delete this.currentObservable.subscription)}}(c);!function(){function RenderPromises(){this.queryPromises=new Map,this.queryInfoTrie=new Map}RenderPromises.prototype.registerSSRObservable=function(e,t){this.lookupQueryInfo(t).observable=e},RenderPromises.prototype.getSSRObservable=function(e){return this.lookupQueryInfo(e).observable},RenderPromises.prototype.addQueryPromise=function(e,t){return this.lookupQueryInfo(e.getOptions()).seen?t():(this.queryPromises.set(e.getOptions(),new Promise(function(t){t(e.fetchData())})),null)},RenderPromises.prototype.hasPromises=function(){return this.queryPromises.size>0},RenderPromises.prototype.consumeAndAwaitPromises=function(){var e=this,t=[];return this.queryPromises.forEach(function(n,o){e.lookupQueryInfo(o).seen=!0,t.push(n)}),this.queryPromises.clear(),Promise.all(t)},RenderPromises.prototype.lookupQueryInfo=function(e){var t=this.queryInfoTrie,n=e.query,o=e.variables,a=t.get(n)||new Map;t.has(n)||t.set(n,a);var i=JSON.stringify(o),r=a.get(i)||{seen:!1,observable:null};return a.has(i)||a.set(i,r),r}}()}}]);